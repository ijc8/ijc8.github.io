{"version":3,"sources":["App.tsx","reportWebVitals.ts","index.tsx"],"names":["gain","audioWorklet","channel","webWorker","audioContext","AudioContext","setupDone","setupAudio","a","resume","GainNode","connect","destination","console","log","sampleRate","addModule","_setInfo","pos","length","_setUnderrun","u","play","track","disconnect","terminate","AudioWorkletNode","numberOfInputs","numberOfOutputs","outputChannelCount","channels","processorOptions","numFrames","MessageChannel","port1","onmessage","e","data","port","postMessage","port2","Worker","path","url","Promise","resolveSetup","end","resolveEnd","event","reset","LoadAnimation","xmlns","xmlnsXlink","width","viewBox","fill","stroke","strokeWidth","strokeDasharray","d","strokeLinecap","attributeName","repeatCount","dur","keyTimes","values","PlayAnimation","id","transform","className","Track","index","status","setPlaying","useState","hover","setHover","sourceOpen","setSourceOpen","menuOpen","setMenuOpen","viewSource","onMouseEnter","onMouseLeave","onClick","window","matchMedia","matches","title","artist","formatTime","duration","stopPropagation","isOpen","setIsOpen","open","onClose","Overlay","Title","style","gridTemplateColumns","FileViewer","name","contents","ref","useRef","useEffect","current","result","filetypemime","startsWith","highlightWorker","text","TextDecoder","decode","innerHTML","language","value","blob","Blob","type","audio","document","createElement","src","URL","createObjectURL","controls","appendChild","SourceView","files","setFiles","selectedFile","setSelectedFile","undefined","fetch","json","Uint8Array","arrayBuffer","file","filename","subarray","start","push","repoUrl","replace","maxHeight","href","target","rel","minWidth","map","Navbar","isHome","goHome","search","fetchAlbum","underrun","setUnderrun","searchOpen","setSearchOpen","searchQuery","setSearchQuery","buttonClass","Array","_","i","autoFocus","onBlur","onChange","onKeyPress","key","trim","prompt","seconds","Infinity","Math","floor","minutes","hours","toString","padStart","Controls","state","disabled","seekBar","info","setInfo","seekPos","setSeekPos","durationRef","trackSeek","el","frac","clientX","offsetLeft","clientWidth","max","min","seek","nextPos","round","removeEventListener","displayPos","onMouseDown","addEventListener","backgroundSize","backgroundPosition","left","VolumeControl","volume","setVolume","volumeBar","db","mouseMove","mouseUp","VolumeIcon","BiVolumeFull","BiVolumeLow","BiVolumeMute","HomeView","query","setAlbum","findAlbums","headers","Accept","response","results","items","full_name","albums","default_branch","setAlbums","cover","tracks","filter","toLowerCase","includes","album","alt","AlbumView","setState","playing","App","_setState","setTracks","setQuery","newState","history","pushState","location","URLSearchParams","get","pathname","q","split","pop","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5188348a.chunk.js","sourcesContent":["import { Dialog } from '@headlessui/react'\nimport React, { useEffect, useRef, useState } from 'react'\nimport { BiPlay, BiPause, BiSkipPrevious, BiSkipNext, BiPlayCircle, BiVolumeFull, BiPauseCircle, BiVolumeLow, BiVolumeMute } from 'react-icons/bi'\n// TODO: Consider BsJournalCode when react-icons 4.3.0 isn't broken.\nimport { BsFileEarmarkCode, BsSearch, BsThreeDotsVertical } from 'react-icons/bs'\nimport { FaHome, FaInfoCircle, FaWrench } from 'react-icons/fa'\nimport { FiExternalLink } from 'react-icons/fi'\nimport { filetypemime } from 'magic-bytes.js'\nimport SyntaxHighlighter from 'react-syntax-highlighter'\nimport { a11yDark } from 'react-syntax-highlighter/dist/esm/styles/hljs'\nimport './App.css'\n\ninterface Track {\n    url: string\n    name: string\n    title: string\n    artist: string\n    album: string\n    duration: number\n    channels: number\n}\n\nconst audioContext = new AudioContext()\n\nlet gain: GainNode\nlet audioWorklet: AudioWorkletNode\nlet channel: MessageChannel\nlet webWorker: Worker\nlet setupDone = false\n\nasync function setupAudio() {\n    await audioContext.resume()\n    gain = new GainNode(audioContext)\n    gain.connect(audioContext.destination)\n    console.log(\"Sample rate:\", audioContext.sampleRate)\n    await audioContext.audioWorklet.addModule(\"worklet.js\")\n    setupDone = true\n}\n\nlet _setInfo = ({ pos, length }: { pos: number, length: number }) => { }\nlet _setUnderrun = (u: boolean) => { }\n\nasync function play(track: Track) {\n    if (!setupDone) {\n        await setupAudio()\n    }\n    audioWorklet && audioWorklet.disconnect()\n    webWorker && webWorker.terminate()\n    audioWorklet = new AudioWorkletNode(audioContext, \"doublebuffer\", {\n        numberOfInputs: 0,\n        numberOfOutputs: 1,\n        outputChannelCount: [track.channels],\n        processorOptions: { numFrames: 1024 },\n    })\n    channel = new MessageChannel()\n    channel.port1.onmessage = (e) => {\n        _setUnderrun(e.data)\n    }\n    audioWorklet.port.postMessage(null, [channel.port2])\n    webWorker = new Worker(\"worker.js\")\n    // Send sample rate and Audio Worklet's port to the Web Worker, which will generate the samples as needed.\n    webWorker.postMessage({\n        path: track.url,\n        sampleRate: audioContext.sampleRate,\n        port: audioWorklet.port\n    }, [audioWorklet.port])\n    audioWorklet.connect(gain)\n    return new Promise<{ end: Promise<void> }>(resolveSetup => {\n        webWorker.onmessage = () => {\n            resolveSetup({\n                end: new Promise<void>(resolveEnd => {\n                    webWorker.onmessage = (event) => {\n                        _setInfo(event.data)\n                        if (event.data.end) {\n                            resolveEnd()\n                        }\n                    }\n                })\n            })\n        }\n    })\n}\n\nasync function reset() {\n    webWorker.postMessage({ sampleRate: audioContext.sampleRate })\n    return new Promise<{ end: Promise<void> }>(resolveSetup => {\n        webWorker.onmessage = () => {\n            resolveSetup({\n                end: new Promise<void>(resolveEnd => {\n                    webWorker.onmessage = (event) => {\n                        _setInfo(event.data)\n                        if (event.data.end) {\n                            resolveEnd()\n                        }\n                    }\n                })\n            })\n        }\n    })\n}\n\nconst LoadAnimation = () => {\n    return <svg xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" width=\"25px\" viewBox=\"0 0 100 100\">\n        <path fill=\"none\" stroke=\"#00ccff\" strokeWidth=\"8\" strokeDasharray=\"42.76482137044271 42.76482137044271\" d=\"M24.3 30C11.4 30 5 43.3 5 50s6.4 20 19.3 20c19.3 0 32.1-40 51.4-40 C88.6 30 95 43.3 95 50s-6.4 20-19.3 20C56.4 70 43.6 30 24.3 30z\" strokeLinecap=\"butt\">\n            <animate attributeName=\"stroke-dashoffset\" repeatCount=\"indefinite\" dur=\"1.2048192771084336s\" keyTimes=\"0;1\" values=\"0;256.58892822265625\"></animate>\n        </path>\n    </svg>\n}\n\nconst PlayAnimation = () => {\n    return <>\n        <style>\n            {`#playing #inner {\n            animation: 1s linear 0s infinite normal none running propagate;\n        }\n\n        #playing #middle {\n            animation: 1s linear 0.25s infinite normal none running propagate;\n        }\n\n        #playing #outer {\n            animation: 1s linear 0.5s infinite normal none running propagate;\n        }\n\n        @keyframes propagate {\n            0% {\n                fill-opacity: 1;\n            }\n\n            30%, 70% {\n                fill-opacity: 0;\n            }\n        }`}\n        </style>\n        <svg id=\"playing\" fill=\"#0cf\" width=\"8mm\" viewBox=\"0 0 15.65 9.69\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g transform=\"translate(-2.67)\">\n                <path className=\"animate-pulse\" d=\"m10.7 3.02 1.48 3.96h-.56l-.9-2.37-1.1 2.37h-.57l1.41-3.08-.2-.57q-.14-.36-.45-.36h-.28v-.45h.34q.65.01.83.5z\" />\n                <g id=\"inner\">\n                    <path d=\"M78.24 103.48h.55q.5.8.76 1.57.25.77.25 1.52 0 .77-.25 1.54t-.76 1.57h-.55q.45-.78.67-1.55.23-.77.23-1.56 0-.78-.23-1.54-.22-.77-.67-1.55z\" strokeWidth=\".17\" transform=\"matrix(.76335 0 0 1 -46.85 -101.71)\" />\n                    <path d=\"M80.35 103.48h.54q.51.8.76 1.57.26.77.26 1.52 0 .77-.26 1.54-.25.77-.76 1.57h-.54q.45-.78.67-1.55.22-.77.22-1.56 0-.78-.22-1.54-.22-.77-.67-1.55z\" strokeWidth=\".17\" transform=\"matrix(-.76335 0 0 1 69.46 -101.71)\" />\n                </g>\n                <g id=\"middle\">\n                    <path d=\"M15.63.75h.72q.67 1.06 1 2.07.34 1.02.34 2.02t-.33 2.02q-.34 1.02-1.01 2.08h-.72q.6-1.03.9-2.05.29-1.01.29-2.05 0-1.04-.3-2.05-.3-1-.89-2.04zM4.87.75h-.72q-.67 1.06-1 2.07-.34 1.02-.34 2.02t.33 2.02q.34 1.02 1 2.08h.73q-.6-1.03-.9-2.05-.29-1.01-.29-2.05 0-1.04.3-2.05.29-1 .89-2.04z\" transform=\"matrix(.76335 0 0 1 2.67 0)\" />\n                </g>\n                <g id=\"outer\">\n                    <path d=\"M18.06 0h.85q.8 1.25 1.19 2.45.4 1.2.4 2.39 0 1.19-.4 2.4-.4 1.2-1.19 2.45h-.85q.7-1.22 1.05-2.42.35-1.2.35-2.43 0-1.23-.35-2.42-.34-1.2-1.05-2.42zM2.44 0h-.85Q.79 1.25.39 2.45 0 3.65 0 4.84q0 1.19.4 2.4.4 1.2 1.19 2.45h.85q-.7-1.22-1.05-2.42-.35-1.2-.35-2.43 0-1.23.35-2.42.34-1.2 1.05-2.42z\" transform=\"matrix(.76335 0 0 1 2.67 0)\" />\n                </g>\n            </g>\n        </svg>\n    </>\n\n}\n\ntype PlayStatus = \"setup\" | \"play\" | \"pause\"\n\nconst Track = ({ index, track, status, setPlaying }: { index: number, track: Track, status: PlayStatus | null, setPlaying: (p: boolean) => void }) => {\n    const [hover, setHover] = useState(false)\n    const [sourceOpen, setSourceOpen] = useState(false)\n    // Only on mobile\n    const [menuOpen, setMenuOpen] = useState(false)\n\n    const onMouseEnter = () => {\n        setHover(true)\n    }\n\n    const onMouseLeave = () => {\n        setHover(false)\n    }\n\n    const onClick = () => {\n        if (window.matchMedia(\"(max-width: 768px)\").matches) {\n            // Corresponds to Tailwind's `md:` prefix.\n            setPlaying(true)\n        }\n    }\n\n    const viewSource = () => {\n        setSourceOpen(true)\n    }\n\n    return <div className={(status === null ? \"\" : \"bg-gray-700 \") + \"group flex items-center hover:bg-gray-600 active:translate-y-px active:translate-x-px md:active:translate-x-0 md:active:translate-y-0 px-4 py-2\"}\n        onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave} onClick={onClick}\n    >\n        <div className=\"w-10 hidden md:block\">\n            {status === \"setup\"\n                ? <div className=\"relative -left-2\"><LoadAnimation /></div>\n                : hover\n                    ? <button className=\"text-2xl relative -left-1.5 top-1\" onClick={() => setPlaying(status !== \"play\")}>\n                        {status === \"play\" ? <BiPause /> : <BiPlay />}\n                    </button>\n                    : status === \"play\"\n                        ? <div className=\"relative -left-2 top-0.5\"><PlayAnimation /></div>\n                        : <span className=\"text-gray-400\">{index + 1}</span>}\n        </div>\n        <div className={\"flex-grow\" + (status === null ? \"\" : \" text-cyan-500\")}>\n            {track.title}\n            <div className=\"text-gray-400 text-sm\">{track.artist}</div>\n        </div>\n        {/* <div className=\"w-1/4\">{track.album}</div> */}\n        <div className=\"w-20 text-right\">{formatTime(track.duration)}</div>\n        <div className=\"w-10 md:invisible group-hover:visible\">\n            <button onClick={viewSource} className=\"ml-4 text-xl relative top-0.5 hidden md:block\">\n                <BsFileEarmarkCode />\n            </button>\n            <button onClick={e => { e.stopPropagation(); setMenuOpen(true) }} className=\"text-gray-400 w-full text-right md:hidden\">\n                <BsThreeDotsVertical className=\"inline\" />\n            </button>\n        </div>\n        <SourceView isOpen={sourceOpen} setIsOpen={setSourceOpen} track={track} />\n        {/* Only on mobile */}\n        <Dialog open={menuOpen} onClose={() => setMenuOpen(false)} className=\"fixed z-10 inset-0 overflow-y-auto\">\n            <div className=\"flex items-center justify-center min-h-screen h-screen\">\n                <Dialog.Overlay className=\"fixed inset-0 bg-black opacity-30\" />\n                <div className=\"relative bg-gray-700 text-white rounded max-w-full max-h-full mx-auto p-3 flex flex-col\">\n                    <Dialog.Title className=\"flex border-b pb-2 mb-3 justify-between\">\n                        <span><FaInfoCircle className=\"text-xl inline-block\" /> Info</span>\n                    </Dialog.Title>\n                    <div className=\"grid\" style={{ gridTemplateColumns: \"auto auto\" }}>\n                        <div className=\"text-gray-400\">Title</div><div>{track.title}</div>\n                        <div className=\"text-gray-400\">Artist</div><div>{track.artist}</div>\n                        <div className=\"text-gray-400 pr-3\">Duration</div><div>{formatTime(track.duration)}</div>\n                        <div className=\"text-gray-400\">Source</div>\n                        <button className=\"text-left text-cyan-500\" onClick={() => { setMenuOpen(false); viewSource() }}>View Source</button>\n                    </div>\n                </div>\n            </div>\n        </Dialog>\n    </div>\n}\n\ninterface File {\n    name: string\n    contents: Uint8Array\n}\n\nconst FileViewer = ({ name, contents }: { name: string, contents: Uint8Array }) => {\n    const ref = useRef<HTMLDivElement>(null)\n\n    useEffect(() => {\n        if (ref.current === null) return\n        const result = filetypemime(contents as any)[0] ?? \"text/plain\"\n        if (result.startsWith(\"audio/\")) {\n            const blob = new Blob([contents], { type: result })\n            const audio = document.createElement(\"audio\")\n            audio.src = window.URL.createObjectURL(blob)\n            audio.controls = true\n            ref.current.className = \"\"\n            // Previously had a loop to remove a child nodes,\n            // but in Firefox that was much slower than simply setting innerHTML.\n            ref.current.innerHTML = \"\"\n            ref.current.appendChild(audio)\n        } else {\n            const highlightWorker = new Worker(\"highlightWorker.js\")\n            ref.current.className = \"hljs\"\n            const text = new TextDecoder().decode(contents)\n            ref.current.innerHTML = text\n            highlightWorker.onmessage = (event) => {\n                if (ref.current === null) return\n                ref.current.className = `language-${event.data.language} hljs`\n                ref.current.innerHTML = event.data.value\n            }\n            highlightWorker.postMessage(text)\n            return () => { highlightWorker.terminate() }\n        }\n    }, [contents])\n\n    return <pre className=\"max-h-full overflow-y-auto flex-grow\">\n        <code ref={ref}></code>\n    </pre>\n}\n\nconst SourceView = ({ isOpen, setIsOpen, track }: { isOpen: boolean, setIsOpen: (b: boolean) => void, track: Track }) => {\n    const [files, setFiles] = useState<File[]>([])\n    const [selectedFile, setSelectedFile] = useState<File>()\n\n    useEffect(() => {\n        if (!isOpen) {\n            setFiles([])\n            setSelectedFile(undefined)\n            return\n        }\n        (async () => {\n            const { files } = await (await fetch(`${track.url}/track.json`)).json()\n            const data = new Uint8Array(await (await fetch(`${track.url}/bundle.data`)).arrayBuffer())\n            for (const file of files) {\n                file.name = file.filename\n                file.contents = data.subarray(file.start, file.end)\n            }\n            files.push({\n                name: \"main.js\",\n                contents: await (await fetch(`${track.url}/main.js`)).arrayBuffer()\n            })\n            setFiles(files)\n            setSelectedFile(files[0])\n        })()\n    }, [track, isOpen])\n\n    let repoUrl = track.url\n    if (repoUrl.startsWith(\"https://raw.githubusercontent.com\")) {\n        repoUrl = repoUrl.replace(\"raw.githubusercontent\", \"github\")\n        repoUrl = repoUrl.replace(\"/main/\", \"/tree/main/\")\n    }\n\n    return <Dialog open={isOpen} onClose={() => setIsOpen(false)} className=\"fixed z-10 inset-0 overflow-y-auto\">\n        <div className=\"flex items-center justify-center min-h-screen h-screen\">\n            <Dialog.Overlay className=\"fixed inset-0 bg-black opacity-30\" />\n            <div className=\"relative bg-gray-700 text-white rounded max-w-full mx-auto p-3 flex flex-col\" style={{ maxHeight: \"89%\" }}>\n                <Dialog.Title className=\"flex border-b pb-2 mb-3 justify-between\">\n                    <span><BsFileEarmarkCode className=\"text-xl inline-block\" /> {track.title}</span>\n                    <a className=\"text-blue-400 ml-4\" href={repoUrl} target=\"_blank\" rel=\"noreferrer\">\n                        View in Repository\n                        <FiExternalLink className=\"ml-1 inline-block\" />\n                    </a>\n                </Dialog.Title>\n                <div className=\"flex min-h-0\">\n                    {selectedFile\n                    ? <>\n                        <div className=\"bg-gray-800 mr-2 overflow-auto\" style={{ minWidth: \"5rem\" }}>\n                            <ul className=\"max-h-full min-w-max\">\n                                {files.map(file =>\n                                    <li key={file.name} className={(file === selectedFile ? \"bg-blue-600 \" : \"\") + \"px-2\"}\n                                        onClick={() => setSelectedFile(file)}>\n                                        {file.name}\n                                    </li>\n                                )}\n                            </ul>\n                        </div>\n                        <FileViewer name={selectedFile.name} contents={selectedFile.contents} />\n                    </>\n                    : <div className=\"w-full flex justify-center\">\n                        <LoadAnimation />\n                        <span className=\"ml-2\">Loading...</span>\n                    </div>}\n                </div>\n            </div>\n        </div>\n    </Dialog>\n}\n\ninterface PlayState {\n    track: Track\n    status: PlayStatus\n}\n\nconst Navbar = ({ isHome, goHome, search, fetchAlbum }: {\n    isHome: boolean, goHome: () => void, search: (q: string) => void, fetchAlbum: (url: string) => void\n}) => {\n    const [underrun, setUnderrun] = useState(false)\n    _setUnderrun = setUnderrun\n\n    const [searchOpen, setSearchOpen] = useState(false)\n    const [searchQuery, setSearchQuery] = useState(\"\")\n\n    const buttonClass = \"hover:bg-gray-700 p-2 font-semibold flex items-center justify-center\"\n\n    return <header className=\"bg-black flex items-center p-1 justify-evenly md:justify-start md:flex-col md:w-56 md:items-stretch\">\n        <button className=\"glitch text-3xl relative top-8 mb-14 hidden md:block\" id=\"logo\" onClick={goHome}>\n            {[...new Array(5)].map((_, i) => <div key={i}>Alternator</div>)}\n        </button>\n        <div className=\"items-center justify-center mb-8 hidden md:flex\">\n            Status\n            <div className={`w-2 h-2 ml-2 mt-0.5 rounded-full ${underrun ? \"bg-red-500\" : \"bg-green-400\"}`} />\n        </div>\n        <button className={buttonClass + (isHome ? \" bg-gray-800\" : \"\")} onClick={goHome}><FaHome className=\"mr-2\" /> Home</button>\n        <div className=\"w-1/3 md:w-full\">\n            {searchOpen\n                ? <div className=\"flex items-center p-1 md:px-2 bg-gray-800\">\n                    <BsSearch className=\"mr-2\" />\n                    <input\n                        type=\"text\" autoFocus={true} onBlur={() => setSearchOpen(false)} className=\"bg-gray-600 w-3/4 px-2 py-1\"\n                        value={searchQuery} onChange={e => setSearchQuery(e.target.value)} onKeyPress={e => {\n                            if (e.key === \"Enter\") {\n                                if (!searchQuery.trim()) {\n                                    setSearchOpen(false)\n                                } else {\n                                    console.log(\"Search query:\", searchQuery)\n                                    setSearchOpen(false)\n                                    search(searchQuery)\n                                }\n                            }\n                        }}\n                    />\n                </div>\n                : <button className={buttonClass + \" w-full\"} onClick={() => setSearchOpen(true)}>\n                    <BsSearch className=\"mr-2\" />\n                    Search\n                </button>}\n        </div>\n        {/* Temporary buttons for testing. */}\n        <button className={buttonClass} onClick={() => fetchAlbum(prompt(\"Album URL\")!)}><FaWrench className=\"mr-2\" /> Load Album</button>\n    </header>\n}\n\nfunction formatTime(seconds: number) {\n    if (seconds === Infinity) {\n        return \"∞\"\n    }\n    seconds = Math.floor(seconds)\n    let minutes = Math.floor(seconds / 60)\n    seconds -= minutes * 60\n    const hours = Math.floor(minutes / 60)\n    if (hours === 0) {\n        return `${minutes}:${seconds.toString().padStart(2, \"0\")}`\n    }\n    minutes -= hours * 60\n    return `${hours}:${minutes.toString().padStart(2, \"0\")}:${seconds.toString().padStart(2, \"0\")}`\n}\n\nconst Controls = ({ state, setPlaying, reset }: { state: PlayState | null, setPlaying: (b: boolean) => void, reset: () => void }) => {\n    const track = state?.track\n    const disabled = state === null || state.status === \"setup\"\n    const seekBar = useRef<HTMLDivElement>(null)\n    const [info, setInfo] = useState({ pos: 0, length: 0 })\n    const { pos, length } = state?.status === \"setup\" ? { pos: 0, length: 0 } : info\n    const duration = track && (track.duration === Infinity\n        ? length + 10 * audioContext.sampleRate\n        : track.duration * audioContext.sampleRate)\n    const [seekPos, setSeekPos] = useState<number>()\n    const durationRef = useRef(duration)\n    durationRef.current = duration\n\n    _setInfo = ({ pos, length }) => {\n        // The Web Worker doesn't know anything about channels.\n        pos /= track!.channels\n        length /= track!.channels\n        setInfo({ pos, length })\n        if (seekPos !== undefined && pos === seekPos) {\n            // Clearing seekPos here prevents a visual glitch where the position and time briefly jump back to the present.\n            setSeekPos(undefined)\n        }\n    }\n\n    const trackSeek = (event: MouseEvent | React.MouseEvent) => {\n        const duration = durationRef.current\n        if (!seekBar.current || !state || !duration) {\n            return\n        }\n        const el = seekBar.current!\n        const frac = (event.clientX - el.offsetLeft) / el.clientWidth\n        setSeekPos(Math.max(0, Math.min(frac, 1)) * duration)\n    }\n\n    const seek = (event: MouseEvent | React.MouseEvent) => {\n        const duration = durationRef.current\n        if (!seekBar.current || !state || !duration) {\n            return\n        }\n        const el = seekBar.current!\n        const frac = (event.clientX - el.offsetLeft) / el.clientWidth\n        const nextPos = Math.round(duration * Math.max(0, Math.min(frac, 1)))\n        setSeekPos(nextPos)\n        webWorker.postMessage(nextPos * track!.channels)\n        document.removeEventListener(\"mousemove\", trackSeek)\n        document.removeEventListener(\"mouseup\", seek)\n    }\n\n    const displayPos = seekPos ?? pos\n\n    return <footer className=\"bg-gray-900 flex flex-col md:flex-row justify-between md:items-center px-4 py-2 md:py-6\">\n        <div className=\"w-full md:w-1/4\">\n            {track && <div className=\"flex items-end justify-between md:block\">\n                <div className=\"font-semibold\">{track.title}</div>\n                <div className=\"text-gray-400 text-sm\">{track.artist}</div>\n            </div>}\n        </div>\n        <div className=\"w-full md:w-5/12 flex md:block\">\n            <div className=\"flex justify-center text-3xl\">\n                <button disabled={disabled} className=\"disabled:text-gray-500 hidden md:block\" onClick={reset}><BiSkipPrevious /></button>\n                <button disabled={disabled} className=\"disabled:text-gray-500 text-4xl\">\n                    {state?.status === \"setup\"\n                        ? <div className=\"py-1.5\"><LoadAnimation /></div>\n                        : state?.status === \"play\"\n                            ? <BiPauseCircle onClick={() => setPlaying(false)} />\n                            : <BiPlayCircle onClick={() => setPlaying(true)} />}\n                </button>\n                <button disabled={disabled} className=\"disabled:text-gray-500 hidden md:block\"><BiSkipNext /></button>\n            </div>\n            <div className=\"flex flex-grow justify-between items-center text-gray-400 text-sm select-none\">\n                {duration && <div className=\"text-right w-12\">{formatTime(Math.floor(displayPos / audioContext.sampleRate))}</div>}\n                <div ref={seekBar} className=\"group mx-2 py-2 w-full\" onClick={seek} onMouseDown={(e) => {\n                    trackSeek(e)\n                    document.addEventListener(\"mousemove\", trackSeek)\n                    document.addEventListener(\"mouseup\", seek)\n                }}>\n                    {duration && <div className=\"w-full flex relative\">\n                        <div className=\"absolute w-full h-1 bg-gradient-split\" style={{\n                            backgroundSize: \"12px 4px\",\n                            backgroundPosition: `${Math.max(pos, length) / duration * 100}%`\n                        }} />\n                        <div className=\"bg-gray-500 h-1 relative\" style={{ width: `${length / duration * 100}%` }}>\n                            {duration && <>\n                                <div className=\"bg-cyan-500 h-1\" style={{ width: `${Math.min(pos, length) / length * 100}%` }} />\n                                <div className={(seekPos ? \"\" : \"hidden group-hover:block \") + \"absolute top-0 transform -translate-x-1/2 -translate-y-1/4 rounded-full w-2 h-2 bg-white\"}\n                                    style={{ left: `${displayPos / length * 100}%` }} />\n                            </>}\n                        </div>\n                    </div>}\n                </div>\n                {duration && <div className=\"w-12\">{formatTime(Math.floor(duration / audioContext.sampleRate))}</div>}\n            </div>\n        </div>\n        <VolumeControl />\n    </footer>\n}\n\nconst VolumeControl = () => {\n    const [volume, setVolume] = useState(1)\n    const volumeBar = useRef<HTMLDivElement>(null)\n\n    useEffect(() => {\n        if (!gain) return\n        if (volume === 0) {\n            // Slider is all the way down: mute\n            gain.gain.value = 0\n        } else {\n            const db = (volume - 1) * 64\n            gain.gain.value = 10**(db/20)\n            console.log(db, gain.gain.value)\n        }\n    }, [volume])\n\n    const mouseMove = (event: MouseEvent | React.MouseEvent) => {\n        if (!volumeBar.current) return\n        const el = volumeBar.current\n        const frac = (event.clientX - el.offsetLeft) / el.clientWidth\n        setVolume(Math.max(0, Math.min(frac, 1)))\n    }\n\n    const mouseUp = () => {\n        document.removeEventListener(\"mousemove\", mouseMove)\n        document.removeEventListener(\"mouseup\", mouseUp)\n    }\n\n    const VolumeIcon = (\n        volume > 0.5 ? BiVolumeFull :\n        volume > 0 ? BiVolumeLow :\n        BiVolumeMute\n    )\n\n    return <div className=\"w-1/4 hidden md:flex justify-end items-center\">\n        <VolumeIcon className=\"text-gray-400 mr-2\" />\n        <div ref={volumeBar} className=\"relative w-32 h-1 py-2 -top-0.5\"\n            onMouseDown={e => {\n                mouseMove(e)\n                document.addEventListener(\"mousemove\", mouseMove)\n                document.addEventListener(\"mouseup\", mouseUp)\n        }}>\n            <div className=\"absolute bg-gray-600 h-1 w-full\"></div>\n            <div className=\"relative bg-gray-400 h-1\" style={{ width: `${volume * 100}%` }}></div>\n        </div>\n    </div>\n}\n\ninterface Album {\n    url: string\n    title: string\n    artist: string\n    cover: string\n    tracks: string[]\n}\n\nconst USE_BACKEND = true\n\nconst HomeView = ({ query, setAlbum }: { query?: string, setAlbum: (a: Album) => void }) => {\n    const findAlbums = async () => {\n        if (USE_BACKEND) {\n            // TODO: Local caching.\n            const url = 'https://api.github.com/search/repositories?q=topic:alternator-album' + (query ? \"%20\" + query : \"\")\n            const response = await fetch(url, {\n                headers: { Accept: \"application/vnd.github.v3+json\" }\n            })\n            const results = await response.json()\n            console.log(\"Found:\", results.items.map((result: any) => result.full_name))\n            const albums = []\n            // TODO: Use `Promise.all`.\n            for (const { full_name, default_branch } of results.items) {\n                const url = `https://raw.githubusercontent.com/${full_name}/${default_branch}`\n                const response = await fetch(`${url}/album.json`)\n                const info = await response.json()\n                console.log(info)\n                albums.push({ url, ...info })\n            }\n            setAlbums(albums)\n        } else {\n            const albums = [\n                {\n                    url: \"https://raw.githubusercontent.com/ijc8/example-album/main\",\n                    title: \"Example Album\",\n                    artist: \"ijc8\",\n                    cover: \"cover.svg\",\n                    tracks: [],\n                },\n                {\n                    url: \"https://raw.githubusercontent.com/ijc8/demo-reel/main\",\n                    title: \"Offline Mode\",\n                    artist: \"ijc8\",\n                    cover: \"album_art.svg\",\n                    tracks: [],\n                },\n            ].filter(a => query === undefined || a.title.toLowerCase().includes(query.toLowerCase()))\n            setAlbums(albums)\n        }\n    }\n\n    useEffect(() => {\n        findAlbums()\n    }, [query])\n\n    const [albums, setAlbums] = useState<Album[]>()\n\n    return <div className=\"p-6 md:pt-12 md:pl-16 flex-grow bg-gray-800\">\n        <h1 className=\"text-3xl hidden md:block\">{query ? <>Search results for <i>{query}</i></> : \"Home\"}</h1>\n        <div className=\"flex flex-col items-center md:flex-row\">\n            {albums\n                ? albums.map(album =>\n                    <div key={album.url} className=\"hover:bg-gray-600 p-4 cursor-pointer\">\n                        <div className=\"w-60 h-60 border\" onClick={() => setAlbum(album)}>\n                            <img src={`${album.url}/${album.cover}`} alt=\"Album cover art\" />\n                        </div>\n                        <div className=\"font-semibold mt-1\">{album.title}</div>\n                        <div className=\"text-gray-400 -mt-1\">{album.artist}</div>\n                    </div>)\n                : \"Loading\"}\n        </div>\n    </div>\n}\n\nconst AlbumView = ({ state, setState, album, tracks }: {\n    state: PlayState | null, setState: (s: PlayState) => void, album: Album, tracks?: Track[]\n}) => {\n    return <>\n        <div className=\"flex flex-col items-center py-3 md:pt-20 md:pl-16 md:pb-6 md:flex-row md:items-end bg-cyan-600\">\n            <div className=\"w-60 h-60 border md:mr-8\">\n                <img src={`${album.url}/${album.cover}`} alt=\"Album cover art\" />\n            </div>\n            <div className=\"flex flex-col items-start mt-3\">\n                <h1 className=\"font-semibold text-3xl md:text-5xl\">{album.title}</h1>\n                <h2>{album.artist}</h2>\n            </div>\n        </div>\n        <div className=\"md:p-16 pt-4 flex-grow bg-gray-800\">\n            <div className=\"flex flex-col\">\n                <div className=\"flex text-gray-400 px-4\">\n                    <div className=\"w-10 hidden md:block\">#</div>\n                    <div className=\"flex-grow\">Title</div>\n                    {/* <div className=\"w-1/4\">Album</div> */}\n                    <div className=\"w-20 text-right\">Duration</div>\n                    <div className=\"w-10\">{/* View Source / Mobile Menu */}</div>\n                </div>\n                <div className=\"col-span-full border-b border-gray-700 mb-2\"></div>\n                {tracks === undefined\n                    ? <div className=\"m-auto\"><LoadAnimation /></div>\n                    : tracks.map((track, i) => <Track\n                        key={i} index={i} track={track}\n                        status={state && state.track === track ? state.status : null}\n                        setPlaying={(playing: boolean) => {\n                            setState({\n                                track,\n                                status: playing ? \"play\" : \"pause\",\n                            })\n                        }\n                        } />)}\n            </div>\n        </div>\n    </>\n}\n\nconst App = () => {\n    const [state, _setState] = useState<PlayState | null>(null)\n    const [tracks, setTracks] = useState<Track[]>()\n    const [album, setAlbum] = useState<Album>()\n    const [query, setQuery] = useState<string>()\n\n    const setState = async (newState: PlayState) => {\n        if (state?.track !== newState.track) {\n            _setState({ track: newState.track, status: \"setup\" })\n            const end = (await play(newState.track)).end\n            _setState({ track: newState.track, status: \"play\" });\n            await end\n            _setState(null)\n        } else {\n            webWorker.postMessage(newState.status === \"play\")\n            _setState(newState)\n        }\n    }\n\n    const fetchAlbum = async (url: string) => {\n        const album = await (await fetch(`${url}/album.json`)).json()\n        console.log(\"Got album info:\", album)\n        window.history.pushState(null, \"\", \"?u=\" + url)\n        album.url = url\n        setAlbum(album)\n        const tracks = []\n        for (const name of album.tracks) {\n            const track = await (await fetch(`${url}/${name}/track.json`)).json()\n            track.name = name\n            track.url = `${url}/${name}`\n            if (track.duration === undefined || track.duration === null) {\n                track.duration = Infinity\n            }\n            tracks.push(track)\n        }\n        setTracks(tracks)\n    }\n\n    useEffect(() => {\n        if (window.location.search) {\n            const params = new URLSearchParams(window.location.search)\n            const url = params.get(\"u\")\n            if (url) {\n                fetchAlbum(url)\n            }\n        }\n    }, [])\n\n    return <div className=\"flex flex-col text-white min-h-full max-h-full justify-end\">\n        <div className=\"flex flex-col md:flex-row flex-grow min-h-0\">\n            <Navbar\n                isHome={album === undefined}\n                goHome={() => { window.history.pushState(null, \"\", window.location.pathname); setAlbum(undefined); setQuery(undefined) }}\n                search={(q: string) => { setAlbum(undefined); setQuery(q) }}\n                fetchAlbum={fetchAlbum}\n            />\n            <main className=\"flex-grow flex flex-col overflow-y-auto\">\n                {album === undefined\n                    ? <HomeView query={query} setAlbum={album => fetchAlbum(album.url)} />\n                    : <AlbumView state={state} setState={setState} album={album} tracks={tracks} />}\n            </main>\n        </div>\n        <Controls state={state} setPlaying={(playing: boolean) => {\n            setState({\n                track: state!.track,\n                status: playing ? \"play\" : \"pause\",\n            })\n        }} reset={async () => {\n            _setState({ track: state!.track, status: \"setup\" })\n            // TODO: Consistent method of resetting.\n            let end\n            if (state!.track.url.split(\"/\").pop()!.startsWith(\"pd\")) {\n                end = (await play(state!.track)).end\n            } else {\n                end = (await reset()).end\n            }\n            _setState({ track: state!.track, status: \"play\" })\n            await end\n            _setState(null)\n        }} />\n    </div>\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}