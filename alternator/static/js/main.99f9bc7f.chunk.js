(this.webpackJsonpplayer=this.webpackJsonpplayer||[]).push([[0],{22:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var a,s,c,r,i=n(2),l=n.n(i),o=n(10),u=n.n(o),d=(n(22),n(17)),j=n(16),m=n(3),b=n.n(m),x=n(11),f=n(4),h=n(6),p=n(30),v=n(5),O=n(8),g=n(12),w=n(15),y=n(14),N=(n(26),n(1)),k=new AudioContext,M=!1;function S(){return C.apply(this,arguments)}function C(){return(C=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.resume();case 2:return(a=new GainNode(k)).connect(k.destination),console.log("Sample rate:",k.sampleRate),e.next=7,k.audioWorklet.addModule("worklet.js");case 7:M=!0;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(e){e.pos,e.length},q=function(e){};function R(e){return E.apply(this,arguments)}function E(){return(E=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M){e.next=3;break}return e.next=3,S();case 3:return s&&s.disconnect(),r&&r.terminate(),s=new AudioWorkletNode(k,"doublebuffer",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[t.channels],processorOptions:{numFrames:1024}}),(c=new MessageChannel).port1.onmessage=function(e){q(e.data)},s.port.postMessage(null,[c.port2]),(r=new Worker("worker.js")).postMessage({path:t.url,sampleRate:k.sampleRate,port:s.port},[s.port]),s.connect(a),e.abrupt("return",new Promise((function(e){r.onmessage=function(){e({end:new Promise((function(e){r.onmessage=function(t){L(t.data),t.data.end&&e()}}))})}})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return P.apply(this,arguments)}function P(){return(P=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.postMessage({sampleRate:k.sampleRate}),e.abrupt("return",new Promise((function(e){r.onmessage=function(){e({end:new Promise((function(e){r.onmessage=function(t){L(t.data),t.data.end&&e()}}))})}})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=function(){return Object(N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25px",viewBox:"0 0 100 100",children:Object(N.jsx)("path",{fill:"none",stroke:"#00ccff",strokeWidth:"8",strokeDasharray:"42.76482137044271 42.76482137044271",d:"M24.3 30C11.4 30 5 43.3 5 50s6.4 20 19.3 20c19.3 0 32.1-40 51.4-40 C88.6 30 95 43.3 95 50s-6.4 20-19.3 20C56.4 70 43.6 30 24.3 30z",strokeLinecap:"butt",children:Object(N.jsx)("animate",{attributeName:"stroke-dashoffset",repeatCount:"indefinite",dur:"1.2048192771084336s",keyTimes:"0;1",values:"0;256.58892822265625"})})})},F=function(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("style",{children:"#playing #inner {\n            animation: 1s linear 0s infinite normal none running propagate;\n        }\n\n        #playing #middle {\n            animation: 1s linear 0.25s infinite normal none running propagate;\n        }\n\n        #playing #outer {\n            animation: 1s linear 0.5s infinite normal none running propagate;\n        }\n\n        @keyframes propagate {\n            0% {\n                fill-opacity: 1;\n            }\n\n            30%, 70% {\n                fill-opacity: 0;\n            }\n        }"}),Object(N.jsx)("svg",{id:"playing",fill:"#0cf",width:"8mm",viewBox:"0 0 15.65 9.69",xmlns:"http://www.w3.org/2000/svg",children:Object(N.jsxs)("g",{transform:"translate(-2.67)",children:[Object(N.jsx)("path",{className:"animate-pulse",d:"m10.7 3.02 1.48 3.96h-.56l-.9-2.37-1.1 2.37h-.57l1.41-3.08-.2-.57q-.14-.36-.45-.36h-.28v-.45h.34q.65.01.83.5z"}),Object(N.jsxs)("g",{id:"inner",children:[Object(N.jsx)("path",{d:"M78.24 103.48h.55q.5.8.76 1.57.25.77.25 1.52 0 .77-.25 1.54t-.76 1.57h-.55q.45-.78.67-1.55.23-.77.23-1.56 0-.78-.23-1.54-.22-.77-.67-1.55z",strokeWidth:".17",transform:"matrix(.76335 0 0 1 -46.85 -101.71)"}),Object(N.jsx)("path",{d:"M80.35 103.48h.54q.51.8.76 1.57.26.77.26 1.52 0 .77-.26 1.54-.25.77-.76 1.57h-.54q.45-.78.67-1.55.22-.77.22-1.56 0-.78-.22-1.54-.22-.77-.67-1.55z",strokeWidth:".17",transform:"matrix(-.76335 0 0 1 69.46 -101.71)"})]}),Object(N.jsx)("g",{id:"middle",children:Object(N.jsx)("path",{d:"M15.63.75h.72q.67 1.06 1 2.07.34 1.02.34 2.02t-.33 2.02q-.34 1.02-1.01 2.08h-.72q.6-1.03.9-2.05.29-1.01.29-2.05 0-1.04-.3-2.05-.3-1-.89-2.04zM4.87.75h-.72q-.67 1.06-1 2.07-.34 1.02-.34 2.02t.33 2.02q.34 1.02 1 2.08h.73q-.6-1.03-.9-2.05-.29-1.01-.29-2.05 0-1.04.3-2.05.29-1 .89-2.04z",transform:"matrix(.76335 0 0 1 2.67 0)"})}),Object(N.jsx)("g",{id:"outer",children:Object(N.jsx)("path",{d:"M18.06 0h.85q.8 1.25 1.19 2.45.4 1.2.4 2.39 0 1.19-.4 2.4-.4 1.2-1.19 2.45h-.85q.7-1.22 1.05-2.42.35-1.2.35-2.43 0-1.23-.35-2.42-.34-1.2-1.05-2.42zM2.44 0h-.85Q.79 1.25.39 2.45 0 3.65 0 4.84q0 1.19.4 2.4.4 1.2 1.19 2.45h.85q-.7-1.22-1.05-2.42-.35-1.2-.35-2.43 0-1.23.35-2.42.34-1.2 1.05-2.42z",transform:"matrix(.76335 0 0 1 2.67 0)"})})]})})]})},T=function(e){var t=e.index,n=e.track,a=e.status,s=e.setPlaying,c=Object(i.useState)(!1),r=Object(f.a)(c,2),l=r[0],o=r[1],u=Object(i.useState)(!1),d=Object(f.a)(u,2),j=d[0],m=d[1],b=Object(i.useState)(!1),x=Object(f.a)(b,2),h=x[0],w=x[1],y=function(){m(!0)};return Object(N.jsxs)("div",{className:(null===a?"":"bg-gray-700 ")+"group flex items-center hover:bg-gray-600 active:translate-y-px active:translate-x-px md:active:translate-x-0 md:active:translate-y-0 px-4 py-2",onMouseEnter:function(){o(!0)},onMouseLeave:function(){o(!1)},onClick:function(){window.matchMedia("(max-width: 768px)").matches&&s(!0)},children:[Object(N.jsx)("div",{className:"w-10 hidden md:block",children:"setup"===a?Object(N.jsx)("div",{className:"relative -left-2",children:Object(N.jsx)(W,{})}):l?Object(N.jsx)("button",{className:"text-2xl relative -left-1.5 top-1",onClick:function(){return s("play"!==a)},children:"play"===a?Object(N.jsx)(v.a,{}):Object(N.jsx)(v.c,{})}):"play"===a?Object(N.jsx)("div",{className:"relative -left-2 top-0.5",children:Object(N.jsx)(F,{})}):Object(N.jsx)("span",{className:"text-gray-400",children:t+1})}),Object(N.jsxs)("div",{className:"flex-grow"+(null===a?"":" text-cyan-500"),children:[n.title,Object(N.jsx)("div",{className:"text-gray-400 text-sm",children:n.artist})]}),Object(N.jsx)("div",{className:"w-20 text-right",children:D(n.duration)}),Object(N.jsxs)("div",{className:"w-10 md:invisible group-hover:visible",children:[Object(N.jsx)("button",{onClick:y,className:"ml-4 text-xl relative top-0.5 hidden md:block",children:Object(N.jsx)(O.a,{})}),Object(N.jsx)("button",{onClick:function(e){e.stopPropagation(),w(!0)},className:"text-gray-400 w-full text-right md:hidden",children:Object(N.jsx)(O.c,{className:"inline"})})]}),Object(N.jsx)(H,{isOpen:j,setIsOpen:m,track:n}),Object(N.jsx)(p.a,{open:h,onClose:function(){return w(!1)},className:"fixed z-10 inset-0 overflow-y-auto",children:Object(N.jsxs)("div",{className:"flex items-center justify-center min-h-screen h-screen",children:[Object(N.jsx)(p.a.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),Object(N.jsxs)("div",{className:"relative bg-gray-700 text-white rounded max-w-full max-h-full mx-auto p-3 flex flex-col",children:[Object(N.jsx)(p.a.Title,{className:"flex border-b pb-2 mb-3 justify-between",children:Object(N.jsxs)("span",{children:[Object(N.jsx)(g.b,{className:"text-xl inline-block"})," Info"]})}),Object(N.jsxs)("div",{className:"grid",style:{gridTemplateColumns:"auto auto"},children:[Object(N.jsx)("div",{className:"text-gray-400",children:"Title"}),Object(N.jsx)("div",{children:n.title}),Object(N.jsx)("div",{className:"text-gray-400",children:"Artist"}),Object(N.jsx)("div",{children:n.artist}),Object(N.jsx)("div",{className:"text-gray-400 pr-3",children:"Duration"}),Object(N.jsx)("div",{children:D(n.duration)}),Object(N.jsx)("div",{className:"text-gray-400",children:"Source"}),Object(N.jsx)("button",{className:"text-left text-cyan-500",onClick:function(){w(!1),y()},children:"View Source"})]})]})]})})]})},z=function(e){e.name;var t=e.contents,n=Object(i.useRef)(null);return Object(i.useEffect)((function(){var e;if(null!==n.current){var a=null!==(e=Object(y.filetypemime)(t)[0])&&void 0!==e?e:"text/plain";if(!a.startsWith("audio/")){var s=new Worker("highlightWorker.js");n.current.className="hljs";var c=(new TextDecoder).decode(t);return n.current.innerHTML=c,s.onmessage=function(e){null!==n.current&&(n.current.className="language-".concat(e.data.language," hljs"),n.current.innerHTML=e.data.value)},s.postMessage(c),function(){s.terminate()}}var r=new Blob([t],{type:a}),i=document.createElement("audio");i.src=window.URL.createObjectURL(r),i.controls=!0,n.current.className="",n.current.innerHTML="",n.current.appendChild(i)}}),[t]),Object(N.jsx)("pre",{className:"max-h-full overflow-y-auto flex-grow",children:Object(N.jsx)("code",{ref:n})})},H=function(e){var t=e.isOpen,n=e.setIsOpen,a=e.track,s=Object(i.useState)([]),c=Object(f.a)(s,2),r=c[0],l=c[1],o=Object(i.useState)(),u=Object(f.a)(o,2),d=u[0],j=u[1];Object(i.useEffect)((function(){if(!t)return l([]),void j(void 0);Object(h.a)(b.a.mark((function e(){var t,n,s,c,r,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(a.url,"/track.json"));case 2:return e.next=4,e.sent.json();case 4:return t=e.sent,n=t.files,e.t0=Uint8Array,e.next=9,fetch("".concat(a.url,"/bundle.data"));case 9:return e.next=11,e.sent.arrayBuffer();case 11:e.t1=e.sent,s=new e.t0(e.t1),c=Object(x.a)(n);try{for(c.s();!(r=c.n()).done;)(i=r.value).name=i.filename,i.contents=s.subarray(i.start,i.end)}catch(o){c.e(o)}finally{c.f()}return e.t2=n,e.next=18,fetch("".concat(a.url,"/main.js"));case 18:return e.next=20,e.sent.arrayBuffer();case 20:e.t3=e.sent,e.t4={name:"main.js",contents:e.t3},e.t2.push.call(e.t2,e.t4),l(n),j(n[0]);case 25:case"end":return e.stop()}}),e)})))()}),[a,t]);var m=a.url;return m.startsWith("https://raw.githubusercontent.com")&&(m=(m=m.replace("raw.githubusercontent","github")).replace("/main/","/tree/main/")),Object(N.jsx)(p.a,{open:t,onClose:function(){return n(!1)},className:"fixed z-10 inset-0 overflow-y-auto",children:Object(N.jsxs)("div",{className:"flex items-center justify-center min-h-screen h-screen",children:[Object(N.jsx)(p.a.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),Object(N.jsxs)("div",{className:"relative bg-gray-700 text-white rounded max-w-full mx-auto p-3 flex flex-col",style:{maxHeight:"89%"},children:[Object(N.jsxs)(p.a.Title,{className:"flex border-b pb-2 mb-3 justify-between",children:[Object(N.jsxs)("span",{children:[Object(N.jsx)(O.a,{className:"text-xl inline-block"})," ",a.title]}),Object(N.jsxs)("a",{className:"text-blue-400 ml-4",href:m,target:"_blank",rel:"noreferrer",children:["View in Repository",Object(N.jsx)(w.a,{className:"ml-1 inline-block"})]})]}),Object(N.jsx)("div",{className:"flex min-h-0",children:d?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"bg-gray-800 mr-2 overflow-auto",style:{minWidth:"5rem"},children:Object(N.jsx)("ul",{className:"max-h-full min-w-max",children:r.map((function(e){return Object(N.jsx)("li",{className:(e===d?"bg-blue-600 ":"")+"px-2",onClick:function(){return j(e)},children:e.name},e.name)}))})}),Object(N.jsx)(z,{name:d.name,contents:d.contents})]}):Object(N.jsxs)("div",{className:"w-full flex justify-center",children:[Object(N.jsx)(W,{}),Object(N.jsx)("span",{className:"ml-2",children:"Loading..."})]})})]})]})})},B=function(e){var t=e.isHome,n=e.goHome,a=e.search,s=e.fetchAlbum,c=Object(i.useState)(!1),r=Object(f.a)(c,2),l=r[0],o=r[1];q=o;var u=Object(i.useState)(!1),d=Object(f.a)(u,2),m=d[0],b=d[1],x=Object(i.useState)(""),h=Object(f.a)(x,2),p=h[0],v=h[1],w="hover:bg-gray-700 p-2 font-semibold flex items-center justify-center";return Object(N.jsxs)("header",{className:"bg-black flex items-center p-1 justify-evenly md:justify-start md:flex-col md:w-56 md:items-stretch",children:[Object(N.jsx)("button",{className:"glitch text-3xl relative top-8 mb-14 hidden md:block",id:"logo",onClick:n,children:Object(j.a)(new Array(5)).map((function(e,t){return Object(N.jsx)("div",{children:"Alternator"},t)}))}),Object(N.jsxs)("div",{className:"items-center justify-center mb-8 hidden md:flex",children:["Status",Object(N.jsx)("div",{className:"w-2 h-2 ml-2 mt-0.5 rounded-full ".concat(l?"bg-red-500":"bg-green-400")})]}),Object(N.jsxs)("button",{className:w+(t?" bg-gray-800":""),onClick:n,children:[Object(N.jsx)(g.a,{className:"mr-2"})," Home"]}),Object(N.jsx)("div",{className:"w-1/3 md:w-full",children:m?Object(N.jsxs)("div",{className:"flex items-center p-1 md:px-2 bg-gray-800",children:[Object(N.jsx)(O.b,{className:"mr-2"}),Object(N.jsx)("input",{type:"text",autoFocus:!0,onBlur:function(){return b(!1)},className:"bg-gray-600 w-3/4 px-2 py-1",value:p,onChange:function(e){return v(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(p.trim()?(console.log("Search query:",p),b(!1),a(p)):b(!1))}})]}):Object(N.jsxs)("button",{className:w+" w-full",onClick:function(){return b(!0)},children:[Object(N.jsx)(O.b,{className:"mr-2"}),"Search"]})}),Object(N.jsxs)("button",{className:w,onClick:function(){return s(prompt("Album URL"))},children:[Object(N.jsx)(g.c,{className:"mr-2"})," Load Album"]})]})};function D(e){if(e===1/0)return"\u221e";e=Math.floor(e);var t=Math.floor(e/60);e-=60*t;var n=Math.floor(t/60);return 0===n?"".concat(t,":").concat(e.toString().padStart(2,"0")):(t-=60*n,"".concat(n,":").concat(t.toString().padStart(2,"0"),":").concat(e.toString().padStart(2,"0")))}var I=function(e){var t=e.state,n=e.setPlaying,a=e.reset,s=null===t||void 0===t?void 0:t.track,c=null===t||"setup"===t.status,l=Object(i.useRef)(null),o=Object(i.useState)({pos:0,length:0}),u=Object(f.a)(o,2),d=u[0],j=u[1],m="setup"===(null===t||void 0===t?void 0:t.status)?{pos:0,length:0}:d,b=m.pos,x=m.length,h=s&&(s.duration===1/0?x+10*k.sampleRate:s.duration*k.sampleRate),p=Object(i.useState)(),O=Object(f.a)(p,2),g=O[0],w=O[1],y=Object(i.useRef)(h);y.current=h,L=function(e){var t=e.pos,n=e.length;t/=s.channels,n/=s.channels,j({pos:t,length:n}),void 0!==g&&t===g&&w(void 0)};var M=function(e){var n=y.current;if(l.current&&t&&n){var a=l.current,s=(e.clientX-a.offsetLeft)/a.clientWidth;w(Math.max(0,Math.min(s,1))*n)}},S=function e(n){var a=y.current;if(l.current&&t&&a){var c=l.current,i=(n.clientX-c.offsetLeft)/c.clientWidth,o=Math.round(a*Math.max(0,Math.min(i,1)));w(o),r.postMessage(o*s.channels),document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",e)}},C=null!==g&&void 0!==g?g:b;return Object(N.jsxs)("footer",{className:"bg-gray-900 flex flex-col md:flex-row justify-between md:items-center px-4 py-2 md:py-6",children:[Object(N.jsx)("div",{className:"w-full md:w-1/4",children:s&&Object(N.jsxs)("div",{className:"flex items-end justify-between md:block",children:[Object(N.jsx)("div",{className:"font-semibold",children:s.title}),Object(N.jsx)("div",{className:"text-gray-400 text-sm",children:s.artist})]})}),Object(N.jsxs)("div",{className:"w-full md:w-5/12 flex md:block",children:[Object(N.jsxs)("div",{className:"flex justify-center text-3xl",children:[Object(N.jsx)("button",{disabled:c,className:"disabled:text-gray-500 hidden md:block",onClick:a,children:Object(N.jsx)(v.f,{})}),Object(N.jsx)("button",{disabled:c,className:"disabled:text-gray-500 text-4xl",children:"setup"===(null===t||void 0===t?void 0:t.status)?Object(N.jsx)("div",{className:"py-1.5",children:Object(N.jsx)(W,{})}):"play"===(null===t||void 0===t?void 0:t.status)?Object(N.jsx)(v.b,{onClick:function(){return n(!1)}}):Object(N.jsx)(v.d,{onClick:function(){return n(!0)}})}),Object(N.jsx)("button",{disabled:c,className:"disabled:text-gray-500 hidden md:block",children:Object(N.jsx)(v.e,{})})]}),Object(N.jsxs)("div",{className:"flex flex-grow justify-between items-center text-gray-400 text-sm select-none",children:[h&&Object(N.jsx)("div",{className:"text-right w-12",children:D(Math.floor(C/k.sampleRate))}),Object(N.jsx)("div",{ref:l,className:"group mx-2 py-2 w-full",onClick:S,onMouseDown:function(e){M(e),document.addEventListener("mousemove",M),document.addEventListener("mouseup",S)},children:h&&Object(N.jsxs)("div",{className:"w-full flex relative",children:[Object(N.jsx)("div",{className:"absolute w-full h-1 bg-gradient-split",style:{backgroundSize:"12px 4px",backgroundPosition:"".concat(Math.max(b,x)/h*100,"%")}}),Object(N.jsx)("div",{className:"bg-gray-500 h-1 relative",style:{width:"".concat(x/h*100,"%")},children:h&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"bg-cyan-500 h-1",style:{width:"".concat(Math.min(b,x)/x*100,"%")}}),Object(N.jsx)("div",{className:(g?"":"hidden group-hover:block ")+"absolute top-0 transform -translate-x-1/2 -translate-y-1/4 rounded-full w-2 h-2 bg-white",style:{left:"".concat(C/x*100,"%")}})]})})]})}),h&&Object(N.jsx)("div",{className:"w-12",children:D(Math.floor(h/k.sampleRate))})]})]}),Object(N.jsx)(U,{})]})},U=function(){var e=Object(i.useState)(1),t=Object(f.a)(e,2),n=t[0],s=t[1],c=Object(i.useRef)(null);Object(i.useEffect)((function(){if(a)if(0===n)a.gain.value=0;else{var e=64*(n-1);a.gain.value=Math.pow(10,e/20),console.log(e,a.gain.value)}}),[n]);var r=function(e){if(c.current){var t=c.current,n=(e.clientX-t.offsetLeft)/t.clientWidth;s(Math.max(0,Math.min(n,1)))}},l=function e(){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",e)},o=n>.5?v.g:n>0?v.h:v.i;return Object(N.jsxs)("div",{className:"w-1/4 hidden md:flex justify-end items-center",children:[Object(N.jsx)(o,{className:"text-gray-400 mr-2"}),Object(N.jsxs)("div",{ref:c,className:"relative w-32 h-1 py-2 -top-0.5",onMouseDown:function(e){r(e),document.addEventListener("mousemove",r),document.addEventListener("mouseup",l)},children:[Object(N.jsx)("div",{className:"absolute bg-gray-600 h-1 w-full"}),Object(N.jsx)("div",{className:"relative bg-gray-400 h-1",style:{width:"".concat(100*n,"%")}})]})]})},_=function(e){var t=e.query,n=e.setAlbum,a=function(){var e=Object(h.a)(b.a.mark((function e(){var n,a,s,c,r,i,o,u,j,m,f,h,p;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.github.com/search/repositories?q=topic:alternator-album"+(t?"%20"+t:""),e.next=4,fetch(n,{headers:{Accept:"application/vnd.github.v3+json"}});case 4:return a=e.sent,e.next=7,a.json();case 7:s=e.sent,console.log("Found:",s.items.map((function(e){return e.full_name}))),c=[],r=Object(x.a)(s.items),e.prev=11,r.s();case 13:if((i=r.n()).done){e.next=26;break}return o=i.value,u=o.full_name,j=o.default_branch,m="https://raw.githubusercontent.com/".concat(u,"/").concat(j),e.next=18,fetch("".concat(m,"/album.json"));case 18:return f=e.sent,e.next=21,f.json();case 21:h=e.sent,console.log(h),c.push(Object(d.a)({url:m},h));case 24:e.next=13;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(11),r.e(e.t0);case 31:return e.prev=31,r.f(),e.finish(31);case 34:l(c),e.next=39;break;case 37:p=[{url:"https://raw.githubusercontent.com/ijc8/example-album/main",title:"Example Album",artist:"ijc8",cover:"cover.svg",tracks:[]},{url:"https://raw.githubusercontent.com/ijc8/demo-reel/main",title:"Offline Mode",artist:"ijc8",cover:"album_art.svg",tracks:[]}].filter((function(e){return void 0===t||e.title.toLowerCase().includes(t.toLowerCase())})),l(p);case 39:case"end":return e.stop()}}),e,null,[[11,28,31,34]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){a()}),[t]);var s=Object(i.useState)(),c=Object(f.a)(s,2),r=c[0],l=c[1];return Object(N.jsxs)("div",{className:"p-6 md:pt-12 md:pl-16 flex-grow bg-gray-800",children:[Object(N.jsx)("h1",{className:"text-3xl hidden md:block",children:t?Object(N.jsxs)(N.Fragment,{children:["Search results for ",Object(N.jsx)("i",{children:t})]}):"Home"}),Object(N.jsx)("div",{className:"flex flex-col items-center md:flex-row",children:r?r.map((function(e){return Object(N.jsxs)("div",{className:"hover:bg-gray-600 p-4 cursor-pointer",children:[Object(N.jsx)("div",{className:"w-60 h-60 border",onClick:function(){return n(e)},children:Object(N.jsx)("img",{src:"".concat(e.url,"/").concat(e.cover),alt:"Album cover art"})}),Object(N.jsx)("div",{className:"font-semibold mt-1",children:e.title}),Object(N.jsx)("div",{className:"text-gray-400 -mt-1",children:e.artist})]},e.url)})):"Loading"})]})},X=function(e){var t=e.state,n=e.setState,a=e.album,s=e.tracks;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:"flex flex-col items-center py-3 md:pt-20 md:pl-16 md:pb-6 md:flex-row md:items-end bg-green-900",children:[Object(N.jsx)("div",{className:"w-60 h-60 border md:mr-8",children:Object(N.jsx)("img",{src:"".concat(a.url,"/").concat(a.cover),alt:"Album cover art"})}),Object(N.jsxs)("div",{className:"flex flex-col items-start mt-3",children:[Object(N.jsx)("h1",{className:"font-semibold text-3xl md:text-5xl",children:a.title}),Object(N.jsx)("h2",{children:"Ian Clester"})]})]}),Object(N.jsx)("div",{className:"md:p-16 pt-4 flex-grow bg-gray-800",children:Object(N.jsxs)("div",{className:"flex flex-col",children:[Object(N.jsxs)("div",{className:"flex text-gray-400 px-4",children:[Object(N.jsx)("div",{className:"w-10 hidden md:block",children:"#"}),Object(N.jsx)("div",{className:"flex-grow",children:"Title"}),Object(N.jsx)("div",{className:"w-20 text-right",children:"Duration"}),Object(N.jsx)("div",{className:"w-10"})]}),Object(N.jsx)("div",{className:"col-span-full border-b border-gray-700 mb-2"}),void 0===s?Object(N.jsx)("div",{className:"m-auto",children:Object(N.jsx)(W,{})}):s.map((function(e,a){return Object(N.jsx)(T,{index:a,track:e,status:t&&t.track===e?t.status:null,setPlaying:function(t){n({track:e,status:t?"play":"pause"})}},a)}))]})})]})},G=function(){var e=Object(i.useState)(null),t=Object(f.a)(e,2),n=t[0],a=t[1],s=Object(i.useState)(),c=Object(f.a)(s,2),l=c[0],o=c[1],u=Object(i.useState)(),d=Object(f.a)(u,2),j=d[0],m=d[1],p=Object(i.useState)(),v=Object(f.a)(p,2),O=v[0],g=v[1],w=function(){var e=Object(h.a)(b.a.mark((function e(t){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===n||void 0===n?void 0:n.track)===t.track){e.next=11;break}return a({track:t.track,status:"setup"}),e.next=4,R(t.track);case 4:return s=e.sent.end,a({track:t.track,status:"play"}),e.next=8,s;case 8:a(null),e.next=13;break;case 11:r.postMessage("play"===t.status),a(t);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(h.a)(b.a.mark((function e(t){var n,a,s,c,r,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t,"/album.json"));case 2:return e.next=4,e.sent.json();case 4:n=e.sent,console.log("Got album info:",n),window.history.pushState(null,"","?"+new URLSearchParams({u:t})),n.url=t,m(n),a=[],s=Object(x.a)(n.tracks),e.prev=11,s.s();case 13:if((c=s.n()).done){e.next=26;break}return r=c.value,e.next=17,fetch("".concat(t,"/").concat(r,"/track.json"));case 17:return e.next=19,e.sent.json();case 19:(i=e.sent).name=r,i.url="".concat(t,"/").concat(r),void 0!==i.duration&&null!==i.duration||(i.duration=1/0),a.push(i);case 24:e.next=13;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(11),s.e(e.t0);case 31:return e.prev=31,s.f(),e.finish(31);case 34:o(a);case 35:case"end":return e.stop()}}),e,null,[[11,28,31,34]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(window.location.search){var e=new URLSearchParams(window.location.search).get("u");e&&y(e)}}),[]),Object(N.jsxs)("div",{className:"flex flex-col text-white min-h-full max-h-full justify-end",children:[Object(N.jsxs)("div",{className:"flex flex-col md:flex-row flex-grow min-h-0",children:[Object(N.jsx)(B,{isHome:void 0===j,goHome:function(){window.history.pushState(null,"",window.location.pathname),m(void 0),g(void 0)},search:function(e){m(void 0),g(e)},fetchAlbum:y}),Object(N.jsx)("main",{className:"flex-grow flex flex-col overflow-y-auto",children:void 0===j?Object(N.jsx)(_,{query:O,setAlbum:function(e){return y(e.url)}}):Object(N.jsx)(X,{state:n,setState:w,album:j,tracks:l})})]}),Object(N.jsx)(I,{state:n,setPlaying:function(e){w({track:n.track,status:e?"play":"pause"})},reset:Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a({track:n.track,status:"setup"}),!n.track.url.split("/").pop().startsWith("pd")){e.next=7;break}return e.next=4,R(n.track);case 4:t=e.sent.end,e.next=10;break;case 7:return e.next=9,A();case 9:t=e.sent.end;case 10:return a({track:n.track,status:"play"}),e.next=13,t;case 13:a(null);case 14:case"end":return e.stop()}}),e)})))})]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};u.a.render(Object(N.jsx)(l.a.StrictMode,{children:Object(N.jsx)(G,{})}),document.getElementById("root")),J()}},[[28,1,2]]]);
//# sourceMappingURL=main.99f9bc7f.chunk.js.map