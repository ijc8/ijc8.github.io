{"version":3,"sources":["App.tsx","reportWebVitals.ts","index.tsx"],"names":["gain","audioWorklet","channel","webWorker","audioContext","AudioContext","setupDone","setupAudio","a","resume","GainNode","connect","destination","console","log","sampleRate","addModule","_setInfo","pos","length","_setUnderrun","u","stop","disconnect","terminate","play","track","AudioWorkletNode","numberOfInputs","numberOfOutputs","outputChannelCount","channels","processorOptions","numFrames","MessageChannel","port1","onmessage","e","data","port","postMessage","port2","Worker","path","url","Promise","resolveSetup","end","resolveEnd","event","reset","LoadAnimation","xmlns","xmlnsXlink","width","viewBox","fill","stroke","strokeWidth","strokeDasharray","d","strokeLinecap","attributeName","repeatCount","dur","keyTimes","values","PlayAnimation","id","transform","className","Track","index","status","setPlaying","useState","hover","setHover","sourceOpen","setSourceOpen","menuOpen","setMenuOpen","viewSource","onMouseEnter","onMouseLeave","onClick","window","matchMedia","matches","title","artist","formatDuration","duration","stopPropagation","isOpen","setIsOpen","open","onClose","Overlay","Title","style","gridTemplateColumns","FileViewer","name","contents","ref","useRef","useEffect","current","result","filetypemime","startsWith","highlightWorker","text","TextDecoder","decode","innerHTML","language","value","blob","Blob","type","audio","document","createElement","src","URL","createObjectURL","controls","appendChild","SourceView","files","setFiles","selectedFile","setSelectedFile","undefined","fetch","json","Uint8Array","arrayBuffer","file","filename","subarray","start","push","repoUrl","replace","maxHeight","href","target","rel","minWidth","map","Navbar","isHome","goHome","search","fetchAlbum","about","underrun","setUnderrun","searchOpen","setSearchOpen","searchQuery","setSearchQuery","buttonClass","Array","_","i","autoFocus","onBlur","onChange","onKeyPress","key","trim","prompt","min","max","formatTime","seconds","Infinity","Math","floor","minutes","hours","toString","padStart","Controls","state","skip","disabled","seekBar","info","setInfo","sr","seekPos","setSeekPos","durationRef","trackSeek","el","frac","clientX","offsetLeft","clientWidth","seek","nextPos","round","removeEventListener","displayPos","onMouseDown","addEventListener","backgroundSize","backgroundPosition","left","VolumeControl","volume","setVolume","volumeBar","db","mouseMove","mouseUp","VolumeIcon","BiVolumeFull","BiVolumeLow","BiVolumeMute","HomeView","query","setAlbum","findAlbums","headers","Accept","response","results","items","full_name","albums","default_branch","setAlbums","cover","tracks","filter","toLowerCase","includes","album","alt","AlbumView","setState","playing","About","dismiss","linkClass","App","_setState","setTracks","setQuery","showAbout","setShowAbout","newState","history","pushState","location","URLSearchParams","get","pathname","q","split","pop","indexOf","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5edf2895.chunk.js","sourcesContent":["import { Dialog } from '@headlessui/react'\nimport React, { useEffect, useRef, useState } from 'react'\nimport { BiPlay, BiPause, BiSkipPrevious, BiSkipNext, BiPlayCircle, BiVolumeFull, BiPauseCircle, BiVolumeLow, BiVolumeMute } from 'react-icons/bi'\nimport { BsInfoCircle, BsJournalCode, BsSearch, BsThreeDotsVertical } from 'react-icons/bs'\nimport { FaHome, FaInfoCircle, FaWrench } from 'react-icons/fa'\nimport { FiExternalLink } from 'react-icons/fi'\nimport { filetypemime } from 'magic-bytes.js'\nimport './App.css'\n\ntype Duration = { min: number, max: number }\n\ninterface Track {\n    url: string\n    name: string\n    title: string\n    artist: string\n    album: string\n    duration: Duration\n    channels: number\n}\n\nconst audioContext = new AudioContext()\n\nlet gain: GainNode\nlet audioWorklet: AudioWorkletNode\nlet channel: MessageChannel\nlet webWorker: Worker\nlet setupDone = false\n\nasync function setupAudio() {\n    await audioContext.resume()\n    gain = new GainNode(audioContext)\n    gain.connect(audioContext.destination)\n    console.log(\"Sample rate:\", audioContext.sampleRate)\n    await audioContext.audioWorklet.addModule(\"worklet.js\")\n    setupDone = true\n}\n\nlet _setInfo = ({ pos, length }: { pos: number, length: number }) => { }\nlet _setUnderrun = (u: boolean) => { }\n\nfunction stop() {\n    audioWorklet && audioWorklet.disconnect()\n    webWorker && webWorker.terminate()\n}\n\nasync function play(track: Track) {\n    if (!setupDone) {\n        await setupAudio()\n    }\n    stop()\n    audioWorklet = new AudioWorkletNode(audioContext, \"doublebuffer\", {\n        numberOfInputs: 0,\n        numberOfOutputs: 1,\n        outputChannelCount: [track.channels],\n        processorOptions: { numFrames: 1024 },\n    })\n    channel = new MessageChannel()\n    channel.port1.onmessage = (e) => {\n        _setUnderrun(e.data)\n    }\n    audioWorklet.port.postMessage(null, [channel.port2])\n    webWorker = new Worker(\"worker.js\")\n    // Send sample rate and Audio Worklet's port to the Web Worker, which will generate the samples as needed.\n    webWorker.postMessage({\n        path: track.url,\n        sampleRate: audioContext.sampleRate,\n        port: audioWorklet.port\n    }, [audioWorklet.port])\n    audioWorklet.connect(gain)\n    return new Promise<{ end: Promise<void> }>(resolveSetup => {\n        webWorker.onmessage = () => {\n            resolveSetup({\n                end: new Promise<void>(resolveEnd => {\n                    webWorker.onmessage = (event) => {\n                        _setInfo(event.data)\n                        if (event.data.end) {\n                            resolveEnd()\n                        }\n                    }\n                })\n            })\n        }\n    })\n}\n\nasync function reset() {\n    webWorker.postMessage({ sampleRate: audioContext.sampleRate })\n    return new Promise<{ end: Promise<void> }>(resolveSetup => {\n        webWorker.onmessage = () => {\n            resolveSetup({\n                end: new Promise<void>(resolveEnd => {\n                    webWorker.onmessage = (event) => {\n                        _setInfo(event.data)\n                        if (event.data.end) {\n                            resolveEnd()\n                        }\n                    }\n                })\n            })\n        }\n    })\n}\n\nconst LoadAnimation = () => {\n    return <svg xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" width=\"25px\" viewBox=\"0 0 100 100\">\n        <path fill=\"none\" stroke=\"#00ccff\" strokeWidth=\"8\" strokeDasharray=\"42.76482137044271 42.76482137044271\" d=\"M24.3 30C11.4 30 5 43.3 5 50s6.4 20 19.3 20c19.3 0 32.1-40 51.4-40 C88.6 30 95 43.3 95 50s-6.4 20-19.3 20C56.4 70 43.6 30 24.3 30z\" strokeLinecap=\"butt\">\n            <animate attributeName=\"stroke-dashoffset\" repeatCount=\"indefinite\" dur=\"1.2048192771084336s\" keyTimes=\"0;1\" values=\"0;256.58892822265625\"></animate>\n        </path>\n    </svg>\n}\n\nconst PlayAnimation = () => {\n    return <>\n        <style>\n            {`#playing #inner {\n            animation: 1s linear 0s infinite normal none running propagate;\n        }\n\n        #playing #middle {\n            animation: 1s linear 0.25s infinite normal none running propagate;\n        }\n\n        #playing #outer {\n            animation: 1s linear 0.5s infinite normal none running propagate;\n        }\n\n        @keyframes propagate {\n            0% {\n                fill-opacity: 1;\n            }\n\n            30%, 70% {\n                fill-opacity: 0;\n            }\n        }`}\n        </style>\n        <svg id=\"playing\" fill=\"#0cf\" width=\"8mm\" viewBox=\"0 0 15.65 9.69\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g transform=\"translate(-2.67)\">\n                <path className=\"animate-pulse\" d=\"m10.7 3.02 1.48 3.96h-.56l-.9-2.37-1.1 2.37h-.57l1.41-3.08-.2-.57q-.14-.36-.45-.36h-.28v-.45h.34q.65.01.83.5z\" />\n                <g id=\"inner\">\n                    <path d=\"M78.24 103.48h.55q.5.8.76 1.57.25.77.25 1.52 0 .77-.25 1.54t-.76 1.57h-.55q.45-.78.67-1.55.23-.77.23-1.56 0-.78-.23-1.54-.22-.77-.67-1.55z\" strokeWidth=\".17\" transform=\"matrix(.76335 0 0 1 -46.85 -101.71)\" />\n                    <path d=\"M80.35 103.48h.54q.51.8.76 1.57.26.77.26 1.52 0 .77-.26 1.54-.25.77-.76 1.57h-.54q.45-.78.67-1.55.22-.77.22-1.56 0-.78-.22-1.54-.22-.77-.67-1.55z\" strokeWidth=\".17\" transform=\"matrix(-.76335 0 0 1 69.46 -101.71)\" />\n                </g>\n                <g id=\"middle\">\n                    <path d=\"M15.63.75h.72q.67 1.06 1 2.07.34 1.02.34 2.02t-.33 2.02q-.34 1.02-1.01 2.08h-.72q.6-1.03.9-2.05.29-1.01.29-2.05 0-1.04-.3-2.05-.3-1-.89-2.04zM4.87.75h-.72q-.67 1.06-1 2.07-.34 1.02-.34 2.02t.33 2.02q.34 1.02 1 2.08h.73q-.6-1.03-.9-2.05-.29-1.01-.29-2.05 0-1.04.3-2.05.29-1 .89-2.04z\" transform=\"matrix(.76335 0 0 1 2.67 0)\" />\n                </g>\n                <g id=\"outer\">\n                    <path d=\"M18.06 0h.85q.8 1.25 1.19 2.45.4 1.2.4 2.39 0 1.19-.4 2.4-.4 1.2-1.19 2.45h-.85q.7-1.22 1.05-2.42.35-1.2.35-2.43 0-1.23-.35-2.42-.34-1.2-1.05-2.42zM2.44 0h-.85Q.79 1.25.39 2.45 0 3.65 0 4.84q0 1.19.4 2.4.4 1.2 1.19 2.45h.85q-.7-1.22-1.05-2.42-.35-1.2-.35-2.43 0-1.23.35-2.42.34-1.2 1.05-2.42z\" transform=\"matrix(.76335 0 0 1 2.67 0)\" />\n                </g>\n            </g>\n        </svg>\n    </>\n\n}\n\ntype PlayStatus = \"setup\" | \"play\" | \"pause\"\n\nconst Track = ({ index, track, status, setPlaying }: { index: number, track: Track, status: PlayStatus | null, setPlaying: (p: boolean) => void }) => {\n    const [hover, setHover] = useState(false)\n    const [sourceOpen, setSourceOpen] = useState(false)\n    // Only on mobile\n    const [menuOpen, setMenuOpen] = useState(false)\n\n    const onMouseEnter = () => {\n        setHover(true)\n    }\n\n    const onMouseLeave = () => {\n        setHover(false)\n    }\n\n    const onClick = () => {\n        if (window.matchMedia(\"(max-width: 768px)\").matches) {\n            // Corresponds to Tailwind's `md:` prefix.\n            setPlaying(true)\n        }\n    }\n\n    const viewSource = () => {\n        setSourceOpen(true)\n    }\n\n    return <div className={(status === null ? \"\" : \"bg-gray-700 \") + \"group flex items-center hover:bg-gray-600 active:translate-y-px active:translate-x-px md:active:translate-x-0 md:active:translate-y-0 px-4 py-2\"}\n        onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave} onClick={onClick}\n    >\n        <div className=\"w-10 hidden md:block\">\n            {status === \"setup\"\n                ? <div className=\"relative -left-2\"><LoadAnimation /></div>\n                : hover\n                    ? <button className=\"text-2xl relative -left-1.5 top-1\" onClick={() => setPlaying(status !== \"play\")}>\n                        {status === \"play\" ? <BiPause /> : <BiPlay />}\n                    </button>\n                    : status === \"play\"\n                        ? <div className=\"relative -left-2 top-0.5\"><PlayAnimation /></div>\n                        : <span className=\"text-gray-400\">{index + 1}</span>}\n        </div>\n        <div className={\"flex-grow\" + (status === null ? \"\" : \" text-cyan-500\")}>\n            {track.title}\n            <div className=\"text-gray-400 text-sm\">{track.artist}</div>\n        </div>\n        {/* <div className=\"w-1/4\">{track.album}</div> */}\n        <div className=\"w-20 text-right\">{formatDuration(track.duration)}</div>\n        <div className=\"w-10 md:invisible group-hover:visible\">\n            <button onClick={viewSource} className=\"ml-4 text-xl relative top-0.5 hidden md:block\">\n                <BsJournalCode />\n            </button>\n            <button onClick={e => { e.stopPropagation(); setMenuOpen(true) }} className=\"text-gray-400 w-full text-right md:hidden\">\n                <BsThreeDotsVertical className=\"inline\" />\n            </button>\n        </div>\n        <SourceView isOpen={sourceOpen} setIsOpen={setSourceOpen} track={track} />\n        {/* Only on mobile */}\n        <Dialog open={menuOpen} onClose={() => setMenuOpen(false)} className=\"fixed z-10 inset-0 overflow-y-auto\">\n            <div className=\"flex items-center justify-center min-h-screen h-screen\">\n                <Dialog.Overlay className=\"fixed inset-0 bg-black opacity-30\" />\n                <div className=\"relative bg-gray-700 text-white rounded max-w-full max-h-full mx-auto p-3 flex flex-col\">\n                    <Dialog.Title className=\"flex border-b pb-2 mb-3 justify-between\">\n                        <span><FaInfoCircle className=\"text-xl inline-block\" /> Info</span>\n                    </Dialog.Title>\n                    <div className=\"grid\" style={{ gridTemplateColumns: \"auto auto\" }}>\n                        <div className=\"text-gray-400\">Title</div><div>{track.title}</div>\n                        <div className=\"text-gray-400\">Artist</div><div>{track.artist}</div>\n                        <div className=\"text-gray-400 pr-3\">Duration</div><div>{formatDuration(track.duration)}</div>\n                        <div className=\"text-gray-400\">Source</div>\n                        <button className=\"text-left text-cyan-500\" onClick={() => { setMenuOpen(false); viewSource() }}>View Source</button>\n                    </div>\n                </div>\n            </div>\n        </Dialog>\n    </div>\n}\n\ninterface File {\n    name: string\n    contents: Uint8Array\n}\n\nconst FileViewer = ({ name, contents }: { name: string, contents: Uint8Array }) => {\n    const ref = useRef<HTMLDivElement>(null)\n\n    useEffect(() => {\n        if (ref.current === null) return\n        const result = filetypemime(contents as any)[0] ?? \"text/plain\"\n        if (result.startsWith(\"audio/\")) {\n            const blob = new Blob([contents], { type: result })\n            const audio = document.createElement(\"audio\")\n            audio.src = window.URL.createObjectURL(blob)\n            audio.controls = true\n            ref.current.className = \"\"\n            // Previously had a loop to remove a child nodes,\n            // but in Firefox that was much slower than simply setting innerHTML.\n            ref.current.innerHTML = \"\"\n            ref.current.appendChild(audio)\n        } else {\n            const highlightWorker = new Worker(\"highlightWorker.js\")\n            ref.current.className = \"hljs\"\n            const text = new TextDecoder().decode(contents)\n            ref.current.innerHTML = text\n            highlightWorker.onmessage = (event) => {\n                if (ref.current === null) return\n                ref.current.className = `language-${event.data.language} hljs`\n                ref.current.innerHTML = event.data.value\n            }\n            highlightWorker.postMessage(text)\n            return () => { highlightWorker.terminate() }\n        }\n    }, [contents])\n\n    return <pre className=\"max-h-full overflow-y-auto flex-grow\">\n        <code ref={ref}></code>\n    </pre>\n}\n\nconst SourceView = ({ isOpen, setIsOpen, track }: { isOpen: boolean, setIsOpen: (b: boolean) => void, track: Track }) => {\n    const [files, setFiles] = useState<File[]>([])\n    const [selectedFile, setSelectedFile] = useState<File>()\n\n    useEffect(() => {\n        if (!isOpen) {\n            setFiles([])\n            setSelectedFile(undefined)\n            return\n        }\n        (async () => {\n            const { files } = await (await fetch(`${track.url}/track.json`)).json()\n            const data = new Uint8Array(await (await fetch(`${track.url}/bundle.data`)).arrayBuffer())\n            for (const file of files) {\n                file.name = file.filename\n                file.contents = data.subarray(file.start, file.end)\n            }\n            files.push({\n                name: \"main.js\",\n                contents: await (await fetch(`${track.url}/main.js`)).arrayBuffer()\n            })\n            setFiles(files)\n            setSelectedFile(files[0])\n        })()\n    }, [track, isOpen])\n\n    let repoUrl = track.url\n    if (repoUrl.startsWith(\"https://raw.githubusercontent.com\")) {\n        repoUrl = repoUrl.replace(\"raw.githubusercontent\", \"github\")\n        repoUrl = repoUrl.replace(\"/main/\", \"/tree/main/\")\n    }\n\n    return <Dialog open={isOpen} onClose={() => setIsOpen(false)} className=\"fixed z-10 inset-0 overflow-y-auto\">\n        <div className=\"flex items-center justify-center min-h-screen h-screen\">\n            <Dialog.Overlay className=\"fixed inset-0 bg-black opacity-30\" />\n            <div className=\"relative bg-gray-700 text-white rounded max-w-full mx-auto p-3 flex flex-col\" style={{ maxHeight: \"89%\" }}>\n                <Dialog.Title className=\"flex border-b pb-2 mb-3 justify-between\">\n                    <span><BsJournalCode className=\"text-xl inline-block\" /> {track.title}</span>\n                    <a className=\"text-blue-400 ml-4\" href={repoUrl} target=\"_blank\" rel=\"noreferrer\">\n                        View in Repository\n                        <FiExternalLink className=\"ml-1 inline-block\" />\n                    </a>\n                </Dialog.Title>\n                <div className=\"flex min-h-0\">\n                    {selectedFile\n                    ? <>\n                        <div className=\"bg-gray-800 mr-2 overflow-auto\" style={{ minWidth: \"5rem\" }}>\n                            <ul className=\"max-h-full min-w-max\">\n                                {files.map(file =>\n                                    <li key={file.name} className={(file === selectedFile ? \"bg-blue-600 \" : \"\") + \"px-2\"}\n                                        onClick={() => setSelectedFile(file)}>\n                                        {file.name}\n                                    </li>\n                                )}\n                            </ul>\n                        </div>\n                        <FileViewer name={selectedFile.name} contents={selectedFile.contents} />\n                    </>\n                    : <div className=\"w-full flex justify-center\">\n                        <LoadAnimation />\n                        <span className=\"ml-2\">Loading...</span>\n                    </div>}\n                </div>\n            </div>\n        </div>\n    </Dialog>\n}\n\ninterface PlayState {\n    track: Track\n    status: PlayStatus\n}\n\nconst Navbar = ({ isHome, goHome, search, fetchAlbum, about }: {\n    isHome: boolean, goHome: () => void, search: (q: string) => void, fetchAlbum: (url: string) => void, about: () => void\n}) => {\n    const [underrun, setUnderrun] = useState(false)\n    _setUnderrun = setUnderrun\n\n    const [searchOpen, setSearchOpen] = useState(false)\n    const [searchQuery, setSearchQuery] = useState(\"\")\n\n    const buttonClass = \"hover:bg-gray-700 p-2 font-semibold flex items-center justify-center\"\n\n    return <header className=\"bg-black flex items-center p-1 justify-evenly md:justify-start md:flex-col md:w-56 md:items-stretch\">\n        <button className=\"glitch text-3xl relative top-8 mb-14 hidden md:block\" id=\"logo\" onClick={goHome}>\n            {[...new Array(5)].map((_, i) => <div key={i}>Alternator</div>)}\n        </button>\n        <div className=\"items-center justify-center mb-8 hidden md:flex\">\n            Status\n            <div className={`w-2 h-2 ml-2 mt-0.5 rounded-full ${underrun ? \"bg-red-500\" : \"bg-green-400\"}`} />\n        </div>\n        <button className={buttonClass + (isHome ? \" bg-gray-800\" : \"\")} onClick={goHome}><FaHome className=\"mr-2\" /> Home</button>\n        <div className=\"w-1/3 md:w-full\">\n            {searchOpen\n                ? <div className=\"flex items-center p-1 md:px-2 bg-gray-800\">\n                    <BsSearch className=\"mr-2\" />\n                    <input\n                        type=\"text\" autoFocus={true} onBlur={() => setSearchOpen(false)} className=\"bg-gray-600 w-3/4 px-2 py-1\"\n                        value={searchQuery} onChange={e => setSearchQuery(e.target.value)} onKeyPress={e => {\n                            if (e.key === \"Enter\") {\n                                if (!searchQuery.trim()) {\n                                    setSearchOpen(false)\n                                } else {\n                                    console.log(\"Search query:\", searchQuery)\n                                    setSearchOpen(false)\n                                    search(searchQuery)\n                                }\n                            }\n                        }}\n                    />\n                </div>\n                : <button className={buttonClass + \" w-full\"} onClick={() => setSearchOpen(true)}>\n                    <BsSearch className=\"mr-2\" />\n                    Search\n                </button>}\n        </div>\n        {/* Temporary buttons for testing. */}\n        <button className={buttonClass} onClick={() => fetchAlbum(prompt(\"Album URL\")!)}><FaWrench className=\"mr-2\" /> Load Album</button>\n        <button className={buttonClass} onClick={() => about()}><BsInfoCircle className=\"mr-2\" /> About</button>\n    </header>\n}\n\nfunction formatDuration({ min, max }: Duration) {\n    return min === max ? formatTime(min) : `${formatTime(min)} – ${formatTime(max)}`\n}\n\nfunction formatTime(seconds: number) {\n    if (seconds === Infinity) {\n        return \"∞\"\n    }\n    seconds = Math.floor(seconds)\n    let minutes = Math.floor(seconds / 60)\n    seconds -= minutes * 60\n    const hours = Math.floor(minutes / 60)\n    if (hours === 0) {\n        return `${minutes}:${seconds.toString().padStart(2, \"0\")}`\n    }\n    minutes -= hours * 60\n    return `${hours}:${minutes.toString().padStart(2, \"0\")}:${seconds.toString().padStart(2, \"0\")}`\n}\n\nconst Controls = ({ state, setPlaying, reset, skip }: { state: PlayState | null, setPlaying: (b: boolean) => void, reset: () => void, skip: () => void }) => {\n    const track = state?.track\n    const disabled = state === null || state.status === \"setup\"\n    const seekBar = useRef<HTMLDivElement>(null)\n    const [info, setInfo] = useState({ pos: 0, length: 0 })\n    const { pos, length } = state?.status === \"setup\" ? { pos: 0, length: 0 } : info\n    let duration\n    if (track) {\n        let { min, max } = track.duration\n        if (min === Infinity) min = 0\n        const sr = audioContext.sampleRate\n        duration = Math.min(Math.max(min * sr, length + 10 * sr), max * sr)\n    }\n    const [seekPos, setSeekPos] = useState<number>()\n    const durationRef = useRef(duration)\n    durationRef.current = duration\n\n    _setInfo = ({ pos, length }) => {\n        // The Web Worker doesn't know anything about channels.\n        pos /= track!.channels\n        length /= track!.channels\n        setInfo({ pos, length })\n        if (seekPos !== undefined && pos === seekPos) {\n            // Clearing seekPos here prevents a visual glitch where the position and time briefly jump back to the present.\n            setSeekPos(undefined)\n        }\n    }\n\n    const trackSeek = (event: MouseEvent | React.MouseEvent) => {\n        const duration = durationRef.current\n        if (!seekBar.current || !state || !duration) {\n            return\n        }\n        const el = seekBar.current!\n        const frac = (event.clientX - el.offsetLeft) / el.clientWidth\n        setSeekPos(Math.max(0, Math.min(frac, 1)) * duration)\n    }\n\n    const seek = (event: MouseEvent | React.MouseEvent) => {\n        const duration = durationRef.current\n        if (!seekBar.current || !state || !duration) {\n            return\n        }\n        const el = seekBar.current!\n        const frac = (event.clientX - el.offsetLeft) / el.clientWidth\n        const nextPos = Math.round(duration * Math.max(0, Math.min(frac, 1)))\n        setSeekPos(nextPos)\n        webWorker.postMessage(nextPos * track!.channels)\n        document.removeEventListener(\"mousemove\", trackSeek)\n        document.removeEventListener(\"mouseup\", seek)\n    }\n\n    const displayPos = seekPos ?? pos\n\n    return <footer className=\"bg-gray-900 flex flex-col md:flex-row justify-between md:items-center px-4 py-2 md:py-6\">\n        <div className=\"w-full md:w-1/4\">\n            {track && <div className=\"flex items-end justify-between md:block\">\n                <div className=\"font-semibold\">{track.title}</div>\n                <div className=\"text-gray-400 text-sm\">{track.artist}</div>\n            </div>}\n        </div>\n        <div className=\"w-full md:w-5/12 flex md:block\">\n            <div className=\"flex justify-center text-3xl\">\n                <button disabled={disabled} className=\"disabled:text-gray-500 hidden md:block\" onClick={reset}><BiSkipPrevious /></button>\n                <button disabled={disabled} className=\"disabled:text-gray-500 text-4xl\">\n                    {state?.status === \"setup\"\n                        ? <div className=\"py-1.5\"><LoadAnimation /></div>\n                        : state?.status === \"play\"\n                            ? <BiPauseCircle onClick={() => setPlaying(false)} />\n                            : <BiPlayCircle onClick={() => setPlaying(true)} />}\n                </button>\n                <button disabled={disabled} className=\"disabled:text-gray-500 hidden md:block\" onClick={skip}><BiSkipNext /></button>\n            </div>\n            <div className=\"flex flex-grow justify-between items-center text-gray-400 text-sm select-none\">\n                {duration && <div className=\"text-right w-12\">{formatTime(Math.floor(displayPos / audioContext.sampleRate))}</div>}\n                <div ref={seekBar} className=\"group mx-2 py-2 w-full\" onClick={seek} onMouseDown={(e) => {\n                    trackSeek(e)\n                    document.addEventListener(\"mousemove\", trackSeek)\n                    document.addEventListener(\"mouseup\", seek)\n                }}>\n                    {duration && <div className=\"w-full flex relative\">\n                        <div className=\"absolute w-full h-1 bg-gradient-split\" style={{\n                            backgroundSize: \"12px 4px\",\n                            backgroundPosition: `${Math.max(pos, length) / duration * 100}%`\n                        }} />\n                        <div className=\"bg-gray-500 h-1 relative\" style={{ width: `${length / duration * 100}%` }}>\n                            {duration && <>\n                                <div className=\"bg-cyan-500 h-1\" style={{ width: `${Math.min(pos, length) / length * 100}%` }} />\n                                <div className={(seekPos ? \"\" : \"hidden group-hover:block \") + \"absolute top-0 transform -translate-x-1/2 -translate-y-1/4 rounded-full w-2 h-2 bg-white\"}\n                                    style={{ left: `${displayPos / length * 100}%` }} />\n                            </>}\n                        </div>\n                    </div>}\n                </div>\n                {duration && <div className=\"w-12\">{formatTime(Math.floor(duration / audioContext.sampleRate))}</div>}\n            </div>\n        </div>\n        <VolumeControl />\n    </footer>\n}\n\nconst VolumeControl = () => {\n    const [volume, setVolume] = useState(1)\n    const volumeBar = useRef<HTMLDivElement>(null)\n\n    useEffect(() => {\n        if (!gain) return\n        if (volume === 0) {\n            // Slider is all the way down: mute\n            gain.gain.value = 0\n        } else {\n            const db = (volume - 1) * 64\n            gain.gain.value = 10**(db/20)\n            console.log(db, gain.gain.value)\n        }\n    }, [volume])\n\n    const mouseMove = (event: MouseEvent | React.MouseEvent) => {\n        if (!volumeBar.current) return\n        const el = volumeBar.current\n        const frac = (event.clientX - el.offsetLeft) / el.clientWidth\n        setVolume(Math.max(0, Math.min(frac, 1)))\n    }\n\n    const mouseUp = () => {\n        document.removeEventListener(\"mousemove\", mouseMove)\n        document.removeEventListener(\"mouseup\", mouseUp)\n    }\n\n    const VolumeIcon = (\n        volume > 0.5 ? BiVolumeFull :\n        volume > 0 ? BiVolumeLow :\n        BiVolumeMute\n    )\n\n    return <div className=\"w-1/4 hidden md:flex justify-end items-center\">\n        <VolumeIcon className=\"text-gray-400 mr-2\" />\n        <div ref={volumeBar} className=\"relative w-32 h-1 py-2 -top-0.5\"\n            onMouseDown={e => {\n                mouseMove(e)\n                document.addEventListener(\"mousemove\", mouseMove)\n                document.addEventListener(\"mouseup\", mouseUp)\n        }}>\n            <div className=\"absolute bg-gray-600 h-1 w-full\"></div>\n            <div className=\"relative bg-gray-400 h-1\" style={{ width: `${volume * 100}%` }}></div>\n        </div>\n    </div>\n}\n\ninterface Album {\n    url: string\n    title: string\n    artist: string\n    cover: string\n    tracks: string[]\n}\n\nconst USE_BACKEND = process.env.NODE_ENV === \"production\"\n\nconst HomeView = ({ query, setAlbum }: { query?: string, setAlbum: (a: Album) => void }) => {\n    const findAlbums = async () => {\n        if (USE_BACKEND) {\n            // TODO: Local caching.\n            const url = 'https://api.github.com/search/repositories?q=topic:alternator-album' + (query ? \"%20\" + query : \"\")\n            const response = await fetch(url, {\n                headers: { Accept: \"application/vnd.github.v3+json\" }\n            })\n            const results = await response.json()\n            console.log(\"Found:\", results.items.map((result: any) => result.full_name))\n            const albums = []\n            // TODO: Use `Promise.all`.\n            for (const { full_name, default_branch } of results.items) {\n                const url = `https://raw.githubusercontent.com/${full_name}/${default_branch}`\n                const response = await fetch(`${url}/album.json`)\n                const info = await response.json()\n                console.log(info)\n                albums.push({ url, ...info })\n            }\n            setAlbums(albums)\n        } else {\n            const albums = [\n                {\n                    url: \"https://raw.githubusercontent.com/ijc8/example-album/main\",\n                    title: \"Example Album\",\n                    artist: \"ijc8\",\n                    cover: \"cover.svg\",\n                    tracks: [],\n                },\n                {\n                    url: \"http://localhost:3000/demo-reel/\",\n                    title: \"Offline Mode\",\n                    artist: \"ijc8\",\n                    cover: \"album_art.svg\",\n                    tracks: [],\n                },\n            ].filter(a => query === undefined || a.title.toLowerCase().includes(query.toLowerCase()))\n            setAlbums(albums)\n        }\n    }\n\n    useEffect(() => {\n        findAlbums()\n    }, [query])\n\n    const [albums, setAlbums] = useState<Album[]>()\n\n    return <div className=\"p-6 md:pt-12 md:pl-16 flex-grow bg-gray-800\">\n        <h1 className=\"text-3xl hidden md:block\">{query ? <>Search results for <i>{query}</i></> : \"Home\"}</h1>\n        <div className=\"flex flex-col items-center md:flex-row\">\n            {albums\n                ? albums.map(album =>\n                    <div key={album.url} className=\"hover:bg-gray-600 p-4 cursor-pointer\">\n                        <div className=\"w-60 h-60 border\" onClick={() => setAlbum(album)}>\n                            <img src={`${album.url}/${album.cover}`} alt=\"Album cover art\" />\n                        </div>\n                        <div className=\"font-semibold mt-1\">{album.title}</div>\n                        <div className=\"text-gray-400 -mt-1\">{album.artist}</div>\n                    </div>)\n                : \"Loading\"}\n        </div>\n    </div>\n}\n\nconst AlbumView = ({ state, setState, album, tracks }: {\n    state: PlayState | null, setState: (s: PlayState) => void, album: Album, tracks?: Track[]\n}) => {\n    return <>\n        <div className=\"flex flex-col items-center py-3 md:pt-20 md:pl-16 md:pb-6 md:flex-row md:items-end bg-cyan-600\">\n            <div className=\"w-60 h-60 border md:mr-8\">\n                <img src={`${album.url}/${album.cover}`} alt=\"Album cover art\" />\n            </div>\n            <div className=\"flex flex-col items-start mt-3\">\n                <h1 className=\"font-semibold text-3xl md:text-5xl\">{album.title}</h1>\n                <h2>{album.artist}</h2>\n            </div>\n        </div>\n        <div className=\"md:p-16 pt-4 flex-grow bg-gray-800\">\n            <div className=\"flex flex-col\">\n                <div className=\"flex text-gray-400 px-4\">\n                    <div className=\"w-10 hidden md:block\">#</div>\n                    <div className=\"flex-grow\">Title</div>\n                    {/* <div className=\"w-1/4\">Album</div> */}\n                    <div className=\"w-20 text-right\">Duration</div>\n                    <div className=\"w-10\">{/* View Source / Mobile Menu */}</div>\n                </div>\n                <div className=\"col-span-full border-b border-gray-700 mb-2\"></div>\n                {tracks === undefined\n                    ? <div className=\"m-auto\"><LoadAnimation /></div>\n                    : tracks.map((track, i) => <Track\n                        key={i} index={i} track={track}\n                        status={state && state.track === track ? state.status : null}\n                        setPlaying={(playing: boolean) => {\n                            setState({\n                                track,\n                                status: playing ? \"play\" : \"pause\",\n                            })\n                        }\n                        } />)}\n            </div>\n        </div>\n    </>\n}\n\nconst About = ({ isOpen, dismiss }: { isOpen: boolean, dismiss: () => void }) => {\n    const linkClass = \"underline text-cyan-400 hover:text-cyan-500\"\n    return <Dialog open={isOpen} onClose={dismiss} className=\"fixed z-10 inset-0 overflow-y-auto\">\n        <div className=\"flex items-center justify-center min-h-screen h-screen\">\n            <Dialog.Overlay className=\"fixed inset-0 bg-black opacity-30\" />\n            <div className=\"relative bg-gray-700 text-white rounded max-w-full mx-auto p-3 flex flex-col\" style={{ maxHeight: \"89%\" }}>\n                <Dialog.Title className=\"flex border-b pb-2 mb-3 justify-between\">\n                    <span><BsInfoCircle className=\"text-xl inline-block mr-1\" /> About Alternator</span>\n                </Dialog.Title>\n                <div className=\"max-w-lg\">\n                    Alternator is a <strong>general-purpose generative music player</strong>.<br/><br/>\n\n                    It is a <strong>generative music</strong> player in that it can play tracks that may generate audio endlessly,\n                    or turn out differently every time due to the use of random values.<br/><br/>\n\n                    It is <strong>general-purpose</strong> in that it represents generative tracks using a\n                    general, low-level executable format (using <a className={linkClass} href=\"https://webassembly.org/\">WebAssembly</a>) that is suitable for use with many different compositional tools and synthesis languages.<br/><br/>\n\n                    The goal is to make it <strong>easier to distribute generative music</strong> by distributing executable bundles generate audio on the fly and safely run in the browser,\n                    rather than streaming static (pre-rendered) audio from a server or requiring listeners to install untrusted executables.<br/><br/>\n\n                    For more information:<br/>\n                    <ul className=\"list-disc ml-8\">\n                        <li>Repository: <a className={linkClass} href=\"https://github.com/ijc8/alternator\">https://github.com/ijc8/alternator</a></li>\n                        <li>Paper: <a className={linkClass} href=\"https://doi.org/10.5281/zenodo.6767436\">https://doi.org/10.5281/zenodo.6767436</a></li>\n                        <li>Talk: <a className={linkClass} href=\"https://youtu.be/CE74b76B2Rw?t=20793s\">https://youtu.be/CE74b76B2Rw?t=20793s</a></li>\n                    </ul>\n                    <br/>\n                    Alternator is an ongoing research project. Please reach out if you are interested in contributing to it, building on it, or composing for it.<br/>\n                    &mdash; Ian Clester (<a className={linkClass} href=\"https://ijc8.me\">ijc8.me</a>)\n                </div>\n            </div>\n        </div>\n    </Dialog>\n}\n\nconst App = () => {\n    const [state, _setState] = useState<PlayState | null>(null)\n    const [tracks, setTracks] = useState<Track[]>()\n    const [album, setAlbum] = useState<Album>()\n    const [query, setQuery] = useState<string>()\n    const [showAbout, setShowAbout] = useState(false)\n\n    const setState = async (newState: PlayState) => {\n        if (state?.track !== newState.track) {\n            _setState({ track: newState.track, status: \"setup\" })\n            const end = (await play(newState.track)).end\n            _setState({ track: newState.track, status: \"play\" });\n            await end\n            _setState(null)\n        } else {\n            webWorker.postMessage(newState.status === \"play\")\n            _setState(newState)\n        }\n    }\n\n    const fetchAlbum = async (url: string) => {\n        const album = await (await fetch(`${url}/album.json`)).json()\n        console.log(\"Got album info:\", album)\n        window.history.pushState(null, \"\", \"?u=\" + url)\n        album.url = url\n        setAlbum(album)\n        const tracks = []\n        for (const name of album.tracks) {\n            const track = await (await fetch(`${url}/${name}/track.json`)).json()\n            track.name = name\n            track.url = `${url}/${name}`\n            track.duration ??= Infinity\n            if (typeof track.duration === \"number\") {\n                track.duration = { min: track.duration, max: track.duration }\n            }\n            track.duration.min ??= Infinity\n            track.duration.max ??= Infinity\n            tracks.push(track)\n        }\n        setTracks(tracks)\n    }\n\n    useEffect(() => {\n        if (window.location.search) {\n            const params = new URLSearchParams(window.location.search)\n            const url = params.get(\"u\")\n            if (url) {\n                fetchAlbum(url)\n            }\n        }\n    }, [])\n\n    return <div className=\"flex flex-col text-white min-h-full max-h-full justify-end\">\n        <div className=\"flex flex-col md:flex-row flex-grow min-h-0\">\n            <Navbar\n                isHome={album === undefined}\n                goHome={() => { window.history.pushState(null, \"\", window.location.pathname); setAlbum(undefined); setQuery(undefined) }}\n                search={(q: string) => { setAlbum(undefined); setQuery(q) }}\n                fetchAlbum={fetchAlbum}\n                about={() => setShowAbout(true)}\n            />\n            <main className=\"flex-grow flex flex-col overflow-y-auto\">\n                {album === undefined\n                    ? <HomeView query={query} setAlbum={album => fetchAlbum(album.url)} />\n                    : <AlbumView state={state} setState={setState} album={album} tracks={tracks} />}\n            </main>\n        </div>\n        <Controls state={state} setPlaying={(playing: boolean) => {\n            setState({\n                track: state!.track,\n                status: playing ? \"play\" : \"pause\",\n            })\n        }} reset={async () => {\n            _setState({ track: state!.track, status: \"setup\" })\n            // TODO: Consistent method of resetting.\n            let end\n            if (state!.track.url.split(\"/\").pop()!.startsWith(\"pd\")) {\n                end = (await play(state!.track)).end\n            } else {\n                end = (await reset()).end\n            }\n            _setState({ track: state!.track, status: \"play\" })\n            await end\n            _setState(null)\n        }} skip={() => {\n            if (!tracks || !state) return\n            const index = tracks.indexOf(state.track)\n            if (index + 1 < tracks.length) {\n                const track = tracks[(tracks.indexOf(state.track) + 1) % tracks.length]\n                setState({\n                    track,\n                    status: \"pause\",\n                })\n            } else {\n                stop()\n                _setState(null)\n            }\n        }} />\n        <About isOpen={showAbout} dismiss={() => setShowAbout(false)} />\n    </div>\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}