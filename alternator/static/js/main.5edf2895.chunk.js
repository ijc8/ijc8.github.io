(this.webpackJsonpplayer=this.webpackJsonpplayer||[]).push([[0],{22:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var s,a,c,r,i=n(2),l=n.n(i),o=n(10),u=n.n(o),d=(n(22),n(17)),j=n(16),b=n(4),m=n.n(b),x=n(11),h=n(3),f=n(6),p=n(30),O=n(5),v=n(7),g=n(12),y=n(15),w=n(14),N=(n(26),n(1)),k=new AudioContext,M=!1;function C(){return S.apply(this,arguments)}function S(){return(S=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.resume();case 2:return(s=new GainNode(k)).connect(k.destination),console.log("Sample rate:",k.sampleRate),e.next=7,k.audioWorklet.addModule("worklet.js");case 7:M=!0;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(e){e.pos,e.length},A=function(e){};function q(){a&&a.disconnect(),r&&r.terminate()}function E(e){return R.apply(this,arguments)}function R(){return(R=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M){e.next=3;break}return e.next=3,C();case 3:return q(),a=new AudioWorkletNode(k,"doublebuffer",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[t.channels],processorOptions:{numFrames:1024}}),(c=new MessageChannel).port1.onmessage=function(e){A(e.data)},a.port.postMessage(null,[c.port2]),(r=new Worker("worker.js")).postMessage({path:t.url,sampleRate:k.sampleRate,port:a.port},[a.port]),a.connect(s),e.abrupt("return",new Promise((function(e){r.onmessage=function(){e({end:new Promise((function(e){r.onmessage=function(t){L(t.data),t.data.end&&e()}}))})}})));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return W.apply(this,arguments)}function W(){return(W=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.postMessage({sampleRate:k.sampleRate}),e.abrupt("return",new Promise((function(e){r.onmessage=function(){e({end:new Promise((function(e){r.onmessage=function(t){L(t.data),t.data.end&&e()}}))})}})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(){return Object(N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25px",viewBox:"0 0 100 100",children:Object(N.jsx)("path",{fill:"none",stroke:"#00ccff",strokeWidth:"8",strokeDasharray:"42.76482137044271 42.76482137044271",d:"M24.3 30C11.4 30 5 43.3 5 50s6.4 20 19.3 20c19.3 0 32.1-40 51.4-40 C88.6 30 95 43.3 95 50s-6.4 20-19.3 20C56.4 70 43.6 30 24.3 30z",strokeLinecap:"butt",children:Object(N.jsx)("animate",{attributeName:"stroke-dashoffset",repeatCount:"indefinite",dur:"1.2048192771084336s",keyTimes:"0;1",values:"0;256.58892822265625"})})})},z=function(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("style",{children:"#playing #inner {\n            animation: 1s linear 0s infinite normal none running propagate;\n        }\n\n        #playing #middle {\n            animation: 1s linear 0.25s infinite normal none running propagate;\n        }\n\n        #playing #outer {\n            animation: 1s linear 0.5s infinite normal none running propagate;\n        }\n\n        @keyframes propagate {\n            0% {\n                fill-opacity: 1;\n            }\n\n            30%, 70% {\n                fill-opacity: 0;\n            }\n        }"}),Object(N.jsx)("svg",{id:"playing",fill:"#0cf",width:"8mm",viewBox:"0 0 15.65 9.69",xmlns:"http://www.w3.org/2000/svg",children:Object(N.jsxs)("g",{transform:"translate(-2.67)",children:[Object(N.jsx)("path",{className:"animate-pulse",d:"m10.7 3.02 1.48 3.96h-.56l-.9-2.37-1.1 2.37h-.57l1.41-3.08-.2-.57q-.14-.36-.45-.36h-.28v-.45h.34q.65.01.83.5z"}),Object(N.jsxs)("g",{id:"inner",children:[Object(N.jsx)("path",{d:"M78.24 103.48h.55q.5.8.76 1.57.25.77.25 1.52 0 .77-.25 1.54t-.76 1.57h-.55q.45-.78.67-1.55.23-.77.23-1.56 0-.78-.23-1.54-.22-.77-.67-1.55z",strokeWidth:".17",transform:"matrix(.76335 0 0 1 -46.85 -101.71)"}),Object(N.jsx)("path",{d:"M80.35 103.48h.54q.51.8.76 1.57.26.77.26 1.52 0 .77-.26 1.54-.25.77-.76 1.57h-.54q.45-.78.67-1.55.22-.77.22-1.56 0-.78-.22-1.54-.22-.77-.67-1.55z",strokeWidth:".17",transform:"matrix(-.76335 0 0 1 69.46 -101.71)"})]}),Object(N.jsx)("g",{id:"middle",children:Object(N.jsx)("path",{d:"M15.63.75h.72q.67 1.06 1 2.07.34 1.02.34 2.02t-.33 2.02q-.34 1.02-1.01 2.08h-.72q.6-1.03.9-2.05.29-1.01.29-2.05 0-1.04-.3-2.05-.3-1-.89-2.04zM4.87.75h-.72q-.67 1.06-1 2.07-.34 1.02-.34 2.02t.33 2.02q.34 1.02 1 2.08h.73q-.6-1.03-.9-2.05-.29-1.01-.29-2.05 0-1.04.3-2.05.29-1 .89-2.04z",transform:"matrix(.76335 0 0 1 2.67 0)"})}),Object(N.jsx)("g",{id:"outer",children:Object(N.jsx)("path",{d:"M18.06 0h.85q.8 1.25 1.19 2.45.4 1.2.4 2.39 0 1.19-.4 2.4-.4 1.2-1.19 2.45h-.85q.7-1.22 1.05-2.42.35-1.2.35-2.43 0-1.23-.35-2.42-.34-1.2-1.05-2.42zM2.44 0h-.85Q.79 1.25.39 2.45 0 3.65 0 4.84q0 1.19.4 2.4.4 1.2 1.19 2.45h.85q-.7-1.22-1.05-2.42-.35-1.2-.35-2.43 0-1.23.35-2.42.34-1.2 1.05-2.42z",transform:"matrix(.76335 0 0 1 2.67 0)"})})]})})]})},F=function(e){var t=e.index,n=e.track,s=e.status,a=e.setPlaying,c=Object(i.useState)(!1),r=Object(h.a)(c,2),l=r[0],o=r[1],u=Object(i.useState)(!1),d=Object(h.a)(u,2),j=d[0],b=d[1],m=Object(i.useState)(!1),x=Object(h.a)(m,2),f=x[0],y=x[1],w=function(){b(!0)};return Object(N.jsxs)("div",{className:(null===s?"":"bg-gray-700 ")+"group flex items-center hover:bg-gray-600 active:translate-y-px active:translate-x-px md:active:translate-x-0 md:active:translate-y-0 px-4 py-2",onMouseEnter:function(){o(!0)},onMouseLeave:function(){o(!1)},onClick:function(){window.matchMedia("(max-width: 768px)").matches&&a(!0)},children:[Object(N.jsx)("div",{className:"w-10 hidden md:block",children:"setup"===s?Object(N.jsx)("div",{className:"relative -left-2",children:Object(N.jsx)(T,{})}):l?Object(N.jsx)("button",{className:"text-2xl relative -left-1.5 top-1",onClick:function(){return a("play"!==s)},children:"play"===s?Object(N.jsx)(O.a,{}):Object(N.jsx)(O.c,{})}):"play"===s?Object(N.jsx)("div",{className:"relative -left-2 top-0.5",children:Object(N.jsx)(z,{})}):Object(N.jsx)("span",{className:"text-gray-400",children:t+1})}),Object(N.jsxs)("div",{className:"flex-grow"+(null===s?"":" text-cyan-500"),children:[n.title,Object(N.jsx)("div",{className:"text-gray-400 text-sm",children:n.artist})]}),Object(N.jsx)("div",{className:"w-20 text-right",children:D(n.duration)}),Object(N.jsxs)("div",{className:"w-10 md:invisible group-hover:visible",children:[Object(N.jsx)("button",{onClick:w,className:"ml-4 text-xl relative top-0.5 hidden md:block",children:Object(N.jsx)(v.b,{})}),Object(N.jsx)("button",{onClick:function(e){e.stopPropagation(),y(!0)},className:"text-gray-400 w-full text-right md:hidden",children:Object(N.jsx)(v.d,{className:"inline"})})]}),Object(N.jsx)(B,{isOpen:j,setIsOpen:b,track:n}),Object(N.jsx)(p.a,{open:f,onClose:function(){return y(!1)},className:"fixed z-10 inset-0 overflow-y-auto",children:Object(N.jsxs)("div",{className:"flex items-center justify-center min-h-screen h-screen",children:[Object(N.jsx)(p.a.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),Object(N.jsxs)("div",{className:"relative bg-gray-700 text-white rounded max-w-full max-h-full mx-auto p-3 flex flex-col",children:[Object(N.jsx)(p.a.Title,{className:"flex border-b pb-2 mb-3 justify-between",children:Object(N.jsxs)("span",{children:[Object(N.jsx)(g.b,{className:"text-xl inline-block"})," Info"]})}),Object(N.jsxs)("div",{className:"grid",style:{gridTemplateColumns:"auto auto"},children:[Object(N.jsx)("div",{className:"text-gray-400",children:"Title"}),Object(N.jsx)("div",{children:n.title}),Object(N.jsx)("div",{className:"text-gray-400",children:"Artist"}),Object(N.jsx)("div",{children:n.artist}),Object(N.jsx)("div",{className:"text-gray-400 pr-3",children:"Duration"}),Object(N.jsx)("div",{children:D(n.duration)}),Object(N.jsx)("div",{className:"text-gray-400",children:"Source"}),Object(N.jsx)("button",{className:"text-left text-cyan-500",onClick:function(){y(!1),w()},children:"View Source"})]})]})]})})]})},H=function(e){e.name;var t=e.contents,n=Object(i.useRef)(null);return Object(i.useEffect)((function(){var e;if(null!==n.current){var s=null!==(e=Object(w.filetypemime)(t)[0])&&void 0!==e?e:"text/plain";if(!s.startsWith("audio/")){var a=new Worker("highlightWorker.js");n.current.className="hljs";var c=(new TextDecoder).decode(t);return n.current.innerHTML=c,a.onmessage=function(e){null!==n.current&&(n.current.className="language-".concat(e.data.language," hljs"),n.current.innerHTML=e.data.value)},a.postMessage(c),function(){a.terminate()}}var r=new Blob([t],{type:s}),i=document.createElement("audio");i.src=window.URL.createObjectURL(r),i.controls=!0,n.current.className="",n.current.innerHTML="",n.current.appendChild(i)}}),[t]),Object(N.jsx)("pre",{className:"max-h-full overflow-y-auto flex-grow",children:Object(N.jsx)("code",{ref:n})})},B=function(e){var t=e.isOpen,n=e.setIsOpen,s=e.track,a=Object(i.useState)([]),c=Object(h.a)(a,2),r=c[0],l=c[1],o=Object(i.useState)(),u=Object(h.a)(o,2),d=u[0],j=u[1];Object(i.useEffect)((function(){if(!t)return l([]),void j(void 0);Object(f.a)(m.a.mark((function e(){var t,n,a,c,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s.url,"/track.json"));case 2:return e.next=4,e.sent.json();case 4:return t=e.sent,n=t.files,e.t0=Uint8Array,e.next=9,fetch("".concat(s.url,"/bundle.data"));case 9:return e.next=11,e.sent.arrayBuffer();case 11:e.t1=e.sent,a=new e.t0(e.t1),c=Object(x.a)(n);try{for(c.s();!(r=c.n()).done;)(i=r.value).name=i.filename,i.contents=a.subarray(i.start,i.end)}catch(o){c.e(o)}finally{c.f()}return e.t2=n,e.next=18,fetch("".concat(s.url,"/main.js"));case 18:return e.next=20,e.sent.arrayBuffer();case 20:e.t3=e.sent,e.t4={name:"main.js",contents:e.t3},e.t2.push.call(e.t2,e.t4),l(n),j(n[0]);case 25:case"end":return e.stop()}}),e)})))()}),[s,t]);var b=s.url;return b.startsWith("https://raw.githubusercontent.com")&&(b=(b=b.replace("raw.githubusercontent","github")).replace("/main/","/tree/main/")),Object(N.jsx)(p.a,{open:t,onClose:function(){return n(!1)},className:"fixed z-10 inset-0 overflow-y-auto",children:Object(N.jsxs)("div",{className:"flex items-center justify-center min-h-screen h-screen",children:[Object(N.jsx)(p.a.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),Object(N.jsxs)("div",{className:"relative bg-gray-700 text-white rounded max-w-full mx-auto p-3 flex flex-col",style:{maxHeight:"89%"},children:[Object(N.jsxs)(p.a.Title,{className:"flex border-b pb-2 mb-3 justify-between",children:[Object(N.jsxs)("span",{children:[Object(N.jsx)(v.b,{className:"text-xl inline-block"})," ",s.title]}),Object(N.jsxs)("a",{className:"text-blue-400 ml-4",href:b,target:"_blank",rel:"noreferrer",children:["View in Repository",Object(N.jsx)(y.a,{className:"ml-1 inline-block"})]})]}),Object(N.jsx)("div",{className:"flex min-h-0",children:d?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"bg-gray-800 mr-2 overflow-auto",style:{minWidth:"5rem"},children:Object(N.jsx)("ul",{className:"max-h-full min-w-max",children:r.map((function(e){return Object(N.jsx)("li",{className:(e===d?"bg-blue-600 ":"")+"px-2",onClick:function(){return j(e)},children:e.name},e.name)}))})}),Object(N.jsx)(H,{name:d.name,contents:d.contents})]}):Object(N.jsxs)("div",{className:"w-full flex justify-center",children:[Object(N.jsx)(T,{}),Object(N.jsx)("span",{className:"ml-2",children:"Loading..."})]})})]})]})})},I=function(e){var t=e.isHome,n=e.goHome,s=e.search,a=e.fetchAlbum,c=e.about,r=Object(i.useState)(!1),l=Object(h.a)(r,2),o=l[0],u=l[1];A=u;var d=Object(i.useState)(!1),b=Object(h.a)(d,2),m=b[0],x=b[1],f=Object(i.useState)(""),p=Object(h.a)(f,2),O=p[0],y=p[1],w="hover:bg-gray-700 p-2 font-semibold flex items-center justify-center";return Object(N.jsxs)("header",{className:"bg-black flex items-center p-1 justify-evenly md:justify-start md:flex-col md:w-56 md:items-stretch",children:[Object(N.jsx)("button",{className:"glitch text-3xl relative top-8 mb-14 hidden md:block",id:"logo",onClick:n,children:Object(j.a)(new Array(5)).map((function(e,t){return Object(N.jsx)("div",{children:"Alternator"},t)}))}),Object(N.jsxs)("div",{className:"items-center justify-center mb-8 hidden md:flex",children:["Status",Object(N.jsx)("div",{className:"w-2 h-2 ml-2 mt-0.5 rounded-full ".concat(o?"bg-red-500":"bg-green-400")})]}),Object(N.jsxs)("button",{className:w+(t?" bg-gray-800":""),onClick:n,children:[Object(N.jsx)(g.a,{className:"mr-2"})," Home"]}),Object(N.jsx)("div",{className:"w-1/3 md:w-full",children:m?Object(N.jsxs)("div",{className:"flex items-center p-1 md:px-2 bg-gray-800",children:[Object(N.jsx)(v.c,{className:"mr-2"}),Object(N.jsx)("input",{type:"text",autoFocus:!0,onBlur:function(){return x(!1)},className:"bg-gray-600 w-3/4 px-2 py-1",value:O,onChange:function(e){return y(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(O.trim()?(console.log("Search query:",O),x(!1),s(O)):x(!1))}})]}):Object(N.jsxs)("button",{className:w+" w-full",onClick:function(){return x(!0)},children:[Object(N.jsx)(v.c,{className:"mr-2"}),"Search"]})}),Object(N.jsxs)("button",{className:w,onClick:function(){return a(prompt("Album URL"))},children:[Object(N.jsx)(g.c,{className:"mr-2"})," Load Album"]}),Object(N.jsxs)("button",{className:w,onClick:function(){return c()},children:[Object(N.jsx)(v.a,{className:"mr-2"})," About"]})]})};function D(e){var t=e.min,n=e.max;return t===n?U(t):"".concat(U(t)," \u2013 ").concat(U(n))}function U(e){if(e===1/0)return"\u221e";e=Math.floor(e);var t=Math.floor(e/60);e-=60*t;var n=Math.floor(t/60);return 0===n?"".concat(t,":").concat(e.toString().padStart(2,"0")):(t-=60*n,"".concat(n,":").concat(t.toString().padStart(2,"0"),":").concat(e.toString().padStart(2,"0")))}var _=function(e){var t,n=e.state,s=e.setPlaying,a=e.reset,c=e.skip,l=null===n||void 0===n?void 0:n.track,o=null===n||"setup"===n.status,u=Object(i.useRef)(null),d=Object(i.useState)({pos:0,length:0}),j=Object(h.a)(d,2),b=j[0],m=j[1],x="setup"===(null===n||void 0===n?void 0:n.status)?{pos:0,length:0}:b,f=x.pos,p=x.length;if(l){var v=l.duration,g=v.min,y=v.max;g===1/0&&(g=0);var w=k.sampleRate;t=Math.min(Math.max(g*w,p+10*w),y*w)}var M=Object(i.useState)(),C=Object(h.a)(M,2),S=C[0],A=C[1],q=Object(i.useRef)(t);q.current=t,L=function(e){var t=e.pos,n=e.length;t/=l.channels,n/=l.channels,m({pos:t,length:n}),void 0!==S&&t===S&&A(void 0)};var E=function(e){var t=q.current;if(u.current&&n&&t){var s=u.current,a=(e.clientX-s.offsetLeft)/s.clientWidth;A(Math.max(0,Math.min(a,1))*t)}},R=function e(t){var s=q.current;if(u.current&&n&&s){var a=u.current,c=(t.clientX-a.offsetLeft)/a.clientWidth,i=Math.round(s*Math.max(0,Math.min(c,1)));A(i),r.postMessage(i*l.channels),document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",e)}},P=null!==S&&void 0!==S?S:f;return Object(N.jsxs)("footer",{className:"bg-gray-900 flex flex-col md:flex-row justify-between md:items-center px-4 py-2 md:py-6",children:[Object(N.jsx)("div",{className:"w-full md:w-1/4",children:l&&Object(N.jsxs)("div",{className:"flex items-end justify-between md:block",children:[Object(N.jsx)("div",{className:"font-semibold",children:l.title}),Object(N.jsx)("div",{className:"text-gray-400 text-sm",children:l.artist})]})}),Object(N.jsxs)("div",{className:"w-full md:w-5/12 flex md:block",children:[Object(N.jsxs)("div",{className:"flex justify-center text-3xl",children:[Object(N.jsx)("button",{disabled:o,className:"disabled:text-gray-500 hidden md:block",onClick:a,children:Object(N.jsx)(O.f,{})}),Object(N.jsx)("button",{disabled:o,className:"disabled:text-gray-500 text-4xl",children:"setup"===(null===n||void 0===n?void 0:n.status)?Object(N.jsx)("div",{className:"py-1.5",children:Object(N.jsx)(T,{})}):"play"===(null===n||void 0===n?void 0:n.status)?Object(N.jsx)(O.b,{onClick:function(){return s(!1)}}):Object(N.jsx)(O.d,{onClick:function(){return s(!0)}})}),Object(N.jsx)("button",{disabled:o,className:"disabled:text-gray-500 hidden md:block",onClick:c,children:Object(N.jsx)(O.e,{})})]}),Object(N.jsxs)("div",{className:"flex flex-grow justify-between items-center text-gray-400 text-sm select-none",children:[t&&Object(N.jsx)("div",{className:"text-right w-12",children:U(Math.floor(P/k.sampleRate))}),Object(N.jsx)("div",{ref:u,className:"group mx-2 py-2 w-full",onClick:R,onMouseDown:function(e){E(e),document.addEventListener("mousemove",E),document.addEventListener("mouseup",R)},children:t&&Object(N.jsxs)("div",{className:"w-full flex relative",children:[Object(N.jsx)("div",{className:"absolute w-full h-1 bg-gradient-split",style:{backgroundSize:"12px 4px",backgroundPosition:"".concat(Math.max(f,p)/t*100,"%")}}),Object(N.jsx)("div",{className:"bg-gray-500 h-1 relative",style:{width:"".concat(p/t*100,"%")},children:t&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"bg-cyan-500 h-1",style:{width:"".concat(Math.min(f,p)/p*100,"%")}}),Object(N.jsx)("div",{className:(S?"":"hidden group-hover:block ")+"absolute top-0 transform -translate-x-1/2 -translate-y-1/4 rounded-full w-2 h-2 bg-white",style:{left:"".concat(P/p*100,"%")}})]})})]})}),t&&Object(N.jsx)("div",{className:"w-12",children:U(Math.floor(t/k.sampleRate))})]})]}),Object(N.jsx)(X,{})]})},X=function(){var e=Object(i.useState)(1),t=Object(h.a)(e,2),n=t[0],a=t[1],c=Object(i.useRef)(null);Object(i.useEffect)((function(){if(s)if(0===n)s.gain.value=0;else{var e=64*(n-1);s.gain.value=Math.pow(10,e/20),console.log(e,s.gain.value)}}),[n]);var r=function(e){if(c.current){var t=c.current,n=(e.clientX-t.offsetLeft)/t.clientWidth;a(Math.max(0,Math.min(n,1)))}},l=function e(){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",e)},o=n>.5?O.g:n>0?O.h:O.i;return Object(N.jsxs)("div",{className:"w-1/4 hidden md:flex justify-end items-center",children:[Object(N.jsx)(o,{className:"text-gray-400 mr-2"}),Object(N.jsxs)("div",{ref:c,className:"relative w-32 h-1 py-2 -top-0.5",onMouseDown:function(e){r(e),document.addEventListener("mousemove",r),document.addEventListener("mouseup",l)},children:[Object(N.jsx)("div",{className:"absolute bg-gray-600 h-1 w-full"}),Object(N.jsx)("div",{className:"relative bg-gray-400 h-1",style:{width:"".concat(100*n,"%")}})]})]})},G=function(e){var t=e.query,n=e.setAlbum,s=function(){var e=Object(f.a)(m.a.mark((function e(){var n,s,a,c,r,i,o,u,j,b,h,f,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.github.com/search/repositories?q=topic:alternator-album"+(t?"%20"+t:""),e.next=4,fetch(n,{headers:{Accept:"application/vnd.github.v3+json"}});case 4:return s=e.sent,e.next=7,s.json();case 7:a=e.sent,console.log("Found:",a.items.map((function(e){return e.full_name}))),c=[],r=Object(x.a)(a.items),e.prev=11,r.s();case 13:if((i=r.n()).done){e.next=26;break}return o=i.value,u=o.full_name,j=o.default_branch,b="https://raw.githubusercontent.com/".concat(u,"/").concat(j),e.next=18,fetch("".concat(b,"/album.json"));case 18:return h=e.sent,e.next=21,h.json();case 21:f=e.sent,console.log(f),c.push(Object(d.a)({url:b},f));case 24:e.next=13;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(11),r.e(e.t0);case 31:return e.prev=31,r.f(),e.finish(31);case 34:l(c),e.next=39;break;case 37:p=[{url:"https://raw.githubusercontent.com/ijc8/example-album/main",title:"Example Album",artist:"ijc8",cover:"cover.svg",tracks:[]},{url:"http://localhost:3000/demo-reel/",title:"Offline Mode",artist:"ijc8",cover:"album_art.svg",tracks:[]}].filter((function(e){return void 0===t||e.title.toLowerCase().includes(t.toLowerCase())})),l(p);case 39:case"end":return e.stop()}}),e,null,[[11,28,31,34]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){s()}),[t]);var a=Object(i.useState)(),c=Object(h.a)(a,2),r=c[0],l=c[1];return Object(N.jsxs)("div",{className:"p-6 md:pt-12 md:pl-16 flex-grow bg-gray-800",children:[Object(N.jsx)("h1",{className:"text-3xl hidden md:block",children:t?Object(N.jsxs)(N.Fragment,{children:["Search results for ",Object(N.jsx)("i",{children:t})]}):"Home"}),Object(N.jsx)("div",{className:"flex flex-col items-center md:flex-row",children:r?r.map((function(e){return Object(N.jsxs)("div",{className:"hover:bg-gray-600 p-4 cursor-pointer",children:[Object(N.jsx)("div",{className:"w-60 h-60 border",onClick:function(){return n(e)},children:Object(N.jsx)("img",{src:"".concat(e.url,"/").concat(e.cover),alt:"Album cover art"})}),Object(N.jsx)("div",{className:"font-semibold mt-1",children:e.title}),Object(N.jsx)("div",{className:"text-gray-400 -mt-1",children:e.artist})]},e.url)})):"Loading"})]})},J=function(e){var t=e.state,n=e.setState,s=e.album,a=e.tracks;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:"flex flex-col items-center py-3 md:pt-20 md:pl-16 md:pb-6 md:flex-row md:items-end bg-cyan-600",children:[Object(N.jsx)("div",{className:"w-60 h-60 border md:mr-8",children:Object(N.jsx)("img",{src:"".concat(s.url,"/").concat(s.cover),alt:"Album cover art"})}),Object(N.jsxs)("div",{className:"flex flex-col items-start mt-3",children:[Object(N.jsx)("h1",{className:"font-semibold text-3xl md:text-5xl",children:s.title}),Object(N.jsx)("h2",{children:s.artist})]})]}),Object(N.jsx)("div",{className:"md:p-16 pt-4 flex-grow bg-gray-800",children:Object(N.jsxs)("div",{className:"flex flex-col",children:[Object(N.jsxs)("div",{className:"flex text-gray-400 px-4",children:[Object(N.jsx)("div",{className:"w-10 hidden md:block",children:"#"}),Object(N.jsx)("div",{className:"flex-grow",children:"Title"}),Object(N.jsx)("div",{className:"w-20 text-right",children:"Duration"}),Object(N.jsx)("div",{className:"w-10"})]}),Object(N.jsx)("div",{className:"col-span-full border-b border-gray-700 mb-2"}),void 0===a?Object(N.jsx)("div",{className:"m-auto",children:Object(N.jsx)(T,{})}):a.map((function(e,s){return Object(N.jsx)(F,{index:s,track:e,status:t&&t.track===e?t.status:null,setPlaying:function(t){n({track:e,status:t?"play":"pause"})}},s)}))]})})]})},V=function(e){var t=e.isOpen,n=e.dismiss,s="underline text-cyan-400 hover:text-cyan-500";return Object(N.jsx)(p.a,{open:t,onClose:n,className:"fixed z-10 inset-0 overflow-y-auto",children:Object(N.jsxs)("div",{className:"flex items-center justify-center min-h-screen h-screen",children:[Object(N.jsx)(p.a.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),Object(N.jsxs)("div",{className:"relative bg-gray-700 text-white rounded max-w-full mx-auto p-3 flex flex-col",style:{maxHeight:"89%"},children:[Object(N.jsx)(p.a.Title,{className:"flex border-b pb-2 mb-3 justify-between",children:Object(N.jsxs)("span",{children:[Object(N.jsx)(v.a,{className:"text-xl inline-block mr-1"})," About Alternator"]})}),Object(N.jsxs)("div",{className:"max-w-lg",children:["Alternator is a ",Object(N.jsx)("strong",{children:"general-purpose generative music player"}),".",Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),"It is a ",Object(N.jsx)("strong",{children:"generative music"})," player in that it can play tracks that may generate audio endlessly, or turn out differently every time due to the use of random values.",Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),"It is ",Object(N.jsx)("strong",{children:"general-purpose"})," in that it represents generative tracks using a general, low-level executable format (using ",Object(N.jsx)("a",{className:s,href:"https://webassembly.org/",children:"WebAssembly"}),") that is suitable for use with many different compositional tools and synthesis languages.",Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),"The goal is to make it ",Object(N.jsx)("strong",{children:"easier to distribute generative music"})," by distributing executable bundles generate audio on the fly and safely run in the browser, rather than streaming static (pre-rendered) audio from a server or requiring listeners to install untrusted executables.",Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),"For more information:",Object(N.jsx)("br",{}),Object(N.jsxs)("ul",{className:"list-disc ml-8",children:[Object(N.jsxs)("li",{children:["Repository: ",Object(N.jsx)("a",{className:s,href:"https://github.com/ijc8/alternator",children:"https://github.com/ijc8/alternator"})]}),Object(N.jsxs)("li",{children:["Paper: ",Object(N.jsx)("a",{className:s,href:"https://doi.org/10.5281/zenodo.6767436",children:"https://doi.org/10.5281/zenodo.6767436"})]}),Object(N.jsxs)("li",{children:["Talk: ",Object(N.jsx)("a",{className:s,href:"https://youtu.be/CE74b76B2Rw?t=20793s",children:"https://youtu.be/CE74b76B2Rw?t=20793s"})]})]}),Object(N.jsx)("br",{}),"Alternator is an ongoing research project. Please reach out if you are interested in contributing to it, building on it, or composing for it.",Object(N.jsx)("br",{}),"\u2014 Ian Clester (",Object(N.jsx)("a",{className:s,href:"https://ijc8.me",children:"ijc8.me"}),")"]})]})]})})},K=function(){var e=Object(i.useState)(null),t=Object(h.a)(e,2),n=t[0],s=t[1],a=Object(i.useState)(),c=Object(h.a)(a,2),l=c[0],o=c[1],u=Object(i.useState)(),d=Object(h.a)(u,2),j=d[0],b=d[1],p=Object(i.useState)(),O=Object(h.a)(p,2),v=O[0],g=O[1],y=Object(i.useState)(!1),w=Object(h.a)(y,2),k=w[0],M=w[1],C=function(){var e=Object(f.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===n||void 0===n?void 0:n.track)===t.track){e.next=11;break}return s({track:t.track,status:"setup"}),e.next=4,E(t.track);case 4:return a=e.sent.end,s({track:t.track,status:"play"}),e.next=8,a;case 8:s(null),e.next=13;break;case 11:r.postMessage("play"===t.status),s(t);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(m.a.mark((function e(t){var n,s,a,c,r,i,l,u,d,j,h;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t,"/album.json"));case 2:return e.next=4,e.sent.json();case 4:n=e.sent,console.log("Got album info:",n),window.history.pushState(null,"","?u="+t),n.url=t,b(n),s=[],a=Object(x.a)(n.tracks),e.prev=11,a.s();case 13:if((c=a.n()).done){e.next=29;break}return j=c.value,e.next=17,fetch("".concat(t,"/").concat(j,"/track.json"));case 17:return e.next=19,e.sent.json();case 19:(h=e.sent).name=j,h.url="".concat(t,"/").concat(j),null!==(r=h.duration)&&void 0!==r||(h.duration=1/0),"number"===typeof h.duration&&(h.duration={min:h.duration,max:h.duration}),null!==(l=(i=h.duration).min)&&void 0!==l||(i.min=1/0),null!==(d=(u=h.duration).max)&&void 0!==d||(u.max=1/0),s.push(h);case 27:e.next=13;break;case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(11),a.e(e.t0);case 34:return e.prev=34,a.f(),e.finish(34);case 37:o(s);case 38:case"end":return e.stop()}}),e,null,[[11,31,34,37]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(window.location.search){var e=new URLSearchParams(window.location.search).get("u");e&&S(e)}}),[]),Object(N.jsxs)("div",{className:"flex flex-col text-white min-h-full max-h-full justify-end",children:[Object(N.jsxs)("div",{className:"flex flex-col md:flex-row flex-grow min-h-0",children:[Object(N.jsx)(I,{isHome:void 0===j,goHome:function(){window.history.pushState(null,"",window.location.pathname),b(void 0),g(void 0)},search:function(e){b(void 0),g(e)},fetchAlbum:S,about:function(){return M(!0)}}),Object(N.jsx)("main",{className:"flex-grow flex flex-col overflow-y-auto",children:void 0===j?Object(N.jsx)(G,{query:v,setAlbum:function(e){return S(e.url)}}):Object(N.jsx)(J,{state:n,setState:C,album:j,tracks:l})})]}),Object(N.jsx)(_,{state:n,setPlaying:function(e){C({track:n.track,status:e?"play":"pause"})},reset:Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s({track:n.track,status:"setup"}),!n.track.url.split("/").pop().startsWith("pd")){e.next=7;break}return e.next=4,E(n.track);case 4:t=e.sent.end,e.next=10;break;case 7:return e.next=9,P();case 9:t=e.sent.end;case 10:return s({track:n.track,status:"play"}),e.next=13,t;case 13:s(null);case 14:case"end":return e.stop()}}),e)}))),skip:function(){if(l&&n)if(l.indexOf(n.track)+1<l.length){var e=l[(l.indexOf(n.track)+1)%l.length];C({track:e,status:"pause"})}else q(),s(null)}}),Object(N.jsx)(V,{isOpen:k,dismiss:function(){return M(!1)}})]})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),s(e),a(e),c(e),r(e)}))};u.a.render(Object(N.jsx)(l.a.StrictMode,{children:Object(N.jsx)(K,{})}),document.getElementById("root")),Q()}},[[28,1,2]]]);
//# sourceMappingURL=main.5edf2895.chunk.js.map